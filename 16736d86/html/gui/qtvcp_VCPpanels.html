<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title>Qtvcp Virtual Control Panels</title>
<link rel="stylesheet" href="..//asciidoc.css" type="text/css" />


<link rel="stylesheet" href="..//linuxcnc.css" type="text/css" />
<script type="text/javascript" src="..//asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>Qtvcp Virtual Control Panels</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph" id="cha:qtvcp-VCP-panels"><p>Qtvcp is an infrastructure to display a custom CNC screen or control panel in LinuxCNC.<br />
It displays a UI file built with the QTDesigner screen editor or combines this<br />
with python programming to create a VCP Panel.<br />
Qtvcp is completely customizable - you can add different buttons and status LEDs etc.<br />
or add python code for even finer grain customization.<br /></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_builtin_panels">1. Builtin panels</h2>
<div class="sectionbody">
<div class="paragraph"><p>There are several builtin HAL panels available.<br />
in a  terminal type <em>qtvcp list</em> &lt;return&gt; to see a list.<br /></p></div>
<div class="sect2">
<h3 id="_copy_dialog">1.1. copy_dialog</h3>
<div class="paragraph"><p>used for copying qtvcp&#8217;s builtin screen code to a folder so one can
customize it.</p></div>
<div class="paragraph"><p>In a terminal:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">qtvcp</span></span> <span style="font-weight: bold"><span style="color: #000000">copy_dialog</span></span></tt></pre></div></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<img src="images/qtvcp_copy_dialog.png" alt="Copy Dialog" />
</div>
<div class="title">Figure 1. copy Dialog - Copy Qtvcp&#8217;s builtin Screen code</div>
</div>
</div>
<div class="sect2">
<h3 id="_test_panel">1.2. test_panel</h3>
<div class="ulist"><ul>
<li>
<p>
collect of useful widgets for testing HAL component. Including speech of LED state.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">loadusr</span></span> <span style="font-weight: bold"><span style="color: #000000">qtvcp</span></span> <span style="font-weight: bold"><span style="color: #000000">test_panel</span></span></tt></pre></div></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<img src="images/test_panel.png" alt="Test Panel" />
</div>
<div class="title">Figure 2. test panel - Test Panel VCP</div>
</div>
</div>
<div class="sect2">
<h3 id="_cam_align">1.3. cam_align</h3>
<div class="ulist"><ul>
<li>
<p>
a camera display widget for rotational alignment
</p>
</li>
</ul></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<img src="images/qtvcp-cam-align.png" alt="Qt Camera Alignment" />
</div>
<div class="title">Figure 3. Qtvcp cam align- Camera based alignment panel</div>
</div>
</div>
<div class="sect2">
<h3 id="_sim_panel">1.4. sim_panel</h3>
<div class="ulist"><ul>
<li>
<p>
a small control panel to simulate MPG jogging controls etc. for simulated configurations
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">loadusr</span></span> <span style="font-weight: bold"><span style="color: #000000">qtvcp</span></span> <span style="font-weight: bold"><span style="color: #000000">sim_panel</span></span></tt></pre></div></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<img src="images/qtvcp_sim_panel.png" alt="Sim Panel" />
</div>
<div class="title">Figure 4. Qtvcp sim panel - Simulated controls for screen testing.</div>
</div>
</div>
<div class="sect2">
<h3 id="_vismach_mill_xyz">1.5. vismach_mill_xyz</h3>
<div class="ulist"><ul>
<li>
<p>
3d openGL view of a 3 axis milling machine
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">loadusr</span></span> <span style="font-weight: bold"><span style="color: #000000">qtvcp</span></span> <span style="font-weight: bold"><span style="color: #000000">vismach_mill_xyz</span></span></tt></pre></div></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<img src="images/qtvismach.png" alt="Qtvcp Vismach Mill" />
</div>
<div class="title">Figure 5. Qtvcp vismach- 3 Axis Mill panel</div>
</div>
</div>
<div class="sect2">
<h3 id="_tool_dialog">1.6. tool_dialog</h3>
<div class="ulist"><ul>
<li>
<p>
manual toolchange dialog that gives tool description.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">loadusr</span></span> -<span style="font-weight: bold"><span style="color: #000000">Wn</span></span> <span style="font-weight: bold"><span style="color: #000000">tool_dialog</span></span> <span style="font-weight: bold"><span style="color: #000000">qtvcp</span></span> -<span style="font-weight: bold"><span style="color: #000000">o</span></span> <span style="font-weight: bold"><span style="color: #000000">speak_on</span></span> -<span style="font-weight: bold"><span style="color: #000000">o</span></span> <span style="font-weight: bold"><span style="color: #000000">audio_on</span></span> <span style="font-weight: bold"><span style="color: #000000">tool_dialog</span></span></tt></pre></div></div>
<div class="paragraph"><p>Options:</p></div>
<div class="ulist"><ul>
<li>
<p>
-o notify_on -use desktop notify dialogs instead of qtvcp native ones.
</p>
</li>
<li>
<p>
-o audio_on -play sound on tool change
</p>
</li>
<li>
<p>
-o speak_on -speak announcement of tool change
</p>
</li>
</ul></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<img src="images/qtvcp_toolChange.png" alt="Tool Change Dialog" />
</div>
<div class="title">Figure 6. Qtvcp tool dialog - Manual Tool Change Dialog</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_panels">1.7. Custom Panels</h3>
<div class="paragraph"><p>You can of course make your own panel and load it.<br />
If you made a ui file named <em>my_panel.ui</em> and name the following HAL file, <em>my_panel.hal</em><br />
You would then load this from a terminal with halrun -I -f my_panel.hal<br /></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># load realtime components</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">loadrt</span></span> <span style="font-weight: bold"><span style="color: #000000">threads</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">loadrt</span></span> <span style="font-weight: bold"><span style="color: #000000">classicladder_rt</span></span>

<span style="font-style: italic"><span style="color: #9A1900"># load user space programs</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">loadusr</span></span> <span style="font-weight: bold"><span style="color: #000000">classicladder</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">loadusr</span></span> -<span style="font-weight: bold"><span style="color: #000000">Wn</span></span> <span style="font-weight: bold"><span style="color: #000000">my_panel</span></span> <span style="font-weight: bold"><span style="color: #000000">qtvcp</span></span> <span style="color: #009900">my_panel.ui</span>

<span style="font-style: italic"><span style="color: #9A1900"># add components to thread</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">addf</span></span> <span style="color: #009900">classicladder.0.refresh</span> <span style="font-weight: bold"><span style="color: #000000">thread1</span></span>


<span style="font-style: italic"><span style="color: #9A1900"># connect pins</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">bit-input1</span></span>     <span style="color: #009900">test_panel.checkbox_1</span>        <span style="color: #009900">classicladder.0.in-00</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">bit-hide</span></span>       <span style="color: #009900">test_panel.checkbox_4</span>        <span style="color: #009900">classicladder.0.hide_gui</span>

<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">bit-output1</span></span>    <span style="color: #009900">test_panel.led_1</span>             <span style="color: #009900">classicladder.0.out-00</span>

<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">s32-in1</span></span>        <span style="color: #009900">test_panel.doublescale_1-s</span>   <span style="color: #009900">classicladder.0.s32in-00</span>

<span style="font-style: italic"><span style="color: #9A1900"># start thread</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">start</span></span></tt></pre></div></div>
<div class="paragraph"><p>In this case we load qtvcp using -Wn; which waits for the panel to finish loading before<br />
continuing to run the next HAL command. This is so the HAL pins from the panel are finished<br />
in case the are used in the rest of the file.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_information">2. More Information</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="qtvcp_widgets.html#cha:qtvcp-widgets">QtVCP Widgets</a></p></div>
<div class="paragraph"><p><a href="qtvcp_libraries.html#cha:qtvcp-libraries">QtVCP Libraries</a></p></div>
<div class="paragraph"><p><a href="qtvcp_code_snippets.html#cha:qtvcp-code">QtVCP Handler File Code Snippets</a></p></div>
<div class="paragraph"><p><a href="qtvcp_development.html#cha:qtvcp-development">QtVCP Development</a></p></div>
<div class="paragraph"><p><a href="qtvcp_custom_widgets.html#cha:qtvcp-custom-widgets">QtVCP Custom Designer Widgets</a></p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2022-06-04 10:50:02 CEST
</div>
</div>
</body>
</html>
