<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 9.0.0rc2" />
<title>The HAL Python module</title>
<link rel="stylesheet" href="..//asciidoc.css" type="text/css" />


<link rel="stylesheet" href="..//linuxcnc.css" type="text/css" />
<script type="text/javascript" src="..//asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>The HAL Python module</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph" id="cha:python-hal-interface"><p>This documentation describes the <code>hal</code> python module, which provides
a Python API for creating and accessing HAL pins and signals.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_usage">1. Basic usage</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python3</span></span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> hal<span style="color: #990000">,</span> time
h <span style="color: #990000">=</span> hal<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">component</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"passthrough"</span><span style="color: #990000">)</span>
h<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newpin</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"in"</span><span style="color: #990000">,</span> hal<span style="color: #990000">.</span>HAL_FLOAT<span style="color: #990000">,</span> hal<span style="color: #990000">.</span>HAL_IN<span style="color: #990000">)</span>
h<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newpin</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"out"</span><span style="color: #990000">,</span> hal<span style="color: #990000">.</span>HAL_FLOAT<span style="color: #990000">,</span> hal<span style="color: #990000">.</span>HAL_OUT<span style="color: #990000">)</span>
h<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ready</span></span><span style="color: #990000">()</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_functions">2. Functions</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>component</strong>
</dt>
<dd>
<p>
+
The component itself is created by a call to the constructor <code>hal.component</code>.
The arguments are the HAL component name and (optionally) the
prefix used for pin and parameter names. If the prefix is not
specified, the component name is used.<br />
.Example
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>h <span style="color: #990000">=</span> hal<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">component</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"passthrough"</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>newpin</strong>
</dt>
<dd>
<p>
+
Create new pin.<br />
Arguments: pin name suffix, pin type, and pin direction. For
parameters, the arguments are: parameter name suffix, parameter type,
and parameter direction.<br />
.Example:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>h<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newpin</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"in"</span><span style="color: #990000">,</span> hal<span style="color: #990000">.</span>HAL_FLOAT<span style="color: #990000">,</span> hal<span style="color: #990000">.</span>HAL_IN<span style="color: #990000">)</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>ready</strong> 
</dt>
<dd>
<p>
Tells the HAL system the component is initialized. Locks out adding pins.
</p>
</dd>
<dt class="hdlist1">
<strong>unready</strong> 
</dt>
<dd>
<p>
Allows a component to add pins after <em>ready()</em> has been called.
One should call <em>ready()</em> on the component after.
</p>
</dd>
<dt class="hdlist1">
<strong>component_exists</strong> 
</dt>
<dd>
<p>
Does the specified component exist at this time.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre><code>hal.component_exists("testpanel")</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>component_is_ready</strong> 
</dt>
<dd>
<p>
Is the specified component ready at this time.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre><code>hal.component_is_ready("testpanel")</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get_msg_level</strong> 
</dt>
<dd>
<p>
Get the current Realtime msg level.
</p>
</dd>
<dt class="hdlist1">
<strong>set_msg_level</strong> 
</dt>
<dd>
<p>
Set the current Realtime msg level.
used for debugging information.
</p>
</dd>
<dt class="hdlist1">
<strong>connect</strong> 
</dt>
<dd>
<p>
Connect a pin to a signal.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre><code>hal.connect("pinname","signal_name")</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>disconnect</strong> 
</dt>
<dd>
<p>
Disconnect a pin from a signal.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre><code>hal.disconnect("pinname")</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get_value</strong> 
</dt>
<dd>
<p>
Read a pin, param, or signal directly.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>value <span style="color: #990000">=</span> hal<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get_value</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"iocontrol.0.emc-enable-in"</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get_info_pins()</strong> 
</dt>
<dd>
<p>
Returns a list of dicts of all system pins.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>listOfDicts <span style="color: #990000">=</span> hal<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get_info_pins</span></span><span style="color: #990000">()</span>
pinName1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'NAME'</span><span style="color: #990000">)</span>
pinValue1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'VALUE'</span><span style="color: #990000">)</span>
pinType1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'TYPE'</span><span style="color: #990000">)</span>
pinDirection1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'DIRECTION'</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get_info_signals()</strong> 
</dt>
<dd>
<p>
Returns a list of dicts of all system signals.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>listOfDicts <span style="color: #990000">=</span> hal<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get_info_signals</span></span><span style="color: #990000">()</span>
signalName1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'NAME'</span><span style="color: #990000">)</span>
signalValue1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'VALUE'</span><span style="color: #990000">)</span>
driverPin1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'DRIVER'</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get_info_params()</strong> 
</dt>
<dd>
<p>
Returns a list of dicts of all system parameters.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>listOfDicts <span style="color: #990000">=</span> hal<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get_info_params</span></span><span style="color: #990000">()</span>
paramName1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'NAME'</span><span style="color: #990000">)</span>
paramValue1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'VALUE'</span><span style="color: #990000">)</span>
paramDirection1 <span style="color: #990000">=</span> listOfDicts<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #FF0000">'DIRECTION'</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>new_sig</strong> 
</dt>
<dd>
<p>
Create a new signal of the type specified.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>hal<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">new_sig</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"signalname"</span><span style="color: #990000">,</span>hal<span style="color: #990000">.</span>HAL_BIT<span style="color: #990000">)</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>pin_has_writer</strong> 
</dt>
<dd>
<p>
Does the specified pin have a driving pin connected.<br />
Returns True or False.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><code>h.in.pin_has_writer()</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get_name</strong> 
</dt>
<dd>
<p>
Get the HAL object name.<br />
Return a string.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><code>h.in.get_name()</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get_type</strong> 
</dt>
<dd>
<p>
Get the HAL object&#8217;s type.<br />
Returns an integer.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><code>h.in.get_type()</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get_dir</strong> 
</dt>
<dd>
<p>
Get the HAL object direction type.<br />
Returns an integer.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><code>h.in.get_dir()</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>get</strong> 
</dt>
<dd>
<p>
Get the HAL object value.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><code>h.in.get()</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>set</strong> 
</dt>
<dd>
<p>
Set the HAL object value.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><code>h.out.set(10)</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>is_pin</strong> 
</dt>
<dd>
<p>
Is the object a pin or parameter?<br />
Returns True or False.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content">
<pre><code>h.in.is_pin()</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>sampler_base</strong> 
</dt>
<dd>
<p>
TODO
</p>
</dd>
<dt class="hdlist1">
<strong>stream_base</strong> 
</dt>
<dd>
<p>
TODO
</p>
</dd>
<dt class="hdlist1">
<strong>stream</strong> 
</dt>
<dd>
<p>
TODO
</p>
</dd>
<dt class="hdlist1">
<strong>set_p</strong> 
</dt>
<dd>
<p>
Set a pin value of any pin in the HAL system.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre><code>hal.set_p("pinname","10")</code></pre>
</div></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2023-06-17 21:52:11 CEST
</div>
</div>
</body>
</html>
