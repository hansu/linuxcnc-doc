<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 9.0.0rc2" />
<title>GMOCCAPY</title>
<link rel="stylesheet" href="..//asciidoc.css" type="text/css" />


<link rel="stylesheet" href="..//linuxcnc.css" type="text/css" />
<script type="text/javascript" src="..//asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>GMOCCAPY</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="cha:gmoccapy">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>GMOCCAPY is a GUI for LinuxCNC, designed to be used with a touch screen,
but can also be used on normal screens with a mouse or hardware buttons and MPG wheels,
as it presents HAL Pins for the most common needs.
Please find more information in the following.</p></div>
<div class="paragraph"><p>It offers the possibility to display up to 9 axes,
support a lathe mode for normal and back tool lathe and can be adapted to nearly every need,
because GMOCCAPY supports embedded tabs and side panels.
As a good example for that see <a href="https://wiki.linuxcnc.org/cgi-bin/wiki.pl?Gmoccapy_plasma">gmoccapy_plasma</a>.</p></div>
<div class="paragraph"><p>GMOCCAPY 3 does support up to 9 axes and 9 joints.
As GMOCCAPY 3 has been changed in code to support the joint / axis changes in LinuxCNC it does not work on 2.7 or 2.6 branch!</p></div>
<div class="paragraph"><p>It has support for integrated virtual keyboard (onboard or matchbox-keyboard),
so there is no need for a hardware keyboard or mouse, but it can also be used with that hardware.
GMOCCAPY offers a separate settings page to configure most settings of the GUI without editing files.</p></div>
<div class="paragraph"><p>GMOCCAPY can be localized very easy, because the corresponding files are separated from the linuxcnc.po files,
so there is no need to translate unneeded stuff.
The files are placed in <strong>/src/po/gmoccapy</strong>.
You could just copy the gmoccapy.pot file to something like it.po and translate that file with gtranslator or poedit.
After rebuilding, you&#8217;d get the GUI in your preference language.
To facilitate the sharing of the translation,
GMOCCAPY is available on the <a href="https://hosted.weblate.org/projects/linuxcnc/gmocappy/">Weblate web interface</a>.
GMOCCAPY is currently available in English, German, Spanish, Polish, Serbian and Hungarian.
Feel free to help me to introduce more languages, be it locally or via the web.
If you need help, don&#8217;t hesitate to contact me on <strong>nieson@web.de</strong>.</p></div>
<div class="paragraph"><p><span class="image">
<a class="image" href="images/gmoccapy_5_axis.png">
<img src="images/gmoccapy_5_axis_mid.png" alt="images/gmoccapy_5_axis_mid.png" />
</a>
</span></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements">2. Requirements</h2>
<div class="sectionbody">
<div class="paragraph"><p>GMOCCAPY 3 has been tested on Debian Jessie, Debian Stretch and MINT 18 with LinuxCNC master and 2.8 release.
It fully support joint / axis changes of LinuxCNC, making it suitable as GUI for Scara, Robots or any other config with more joints than axes.
So it supports also gantry configs.
If you use other versions, please inform about problems and / or solutions on the
<a href="https://linuxcnc.org/index.php/english/forum/41-guis/26314-gmoccapy-a-new-screen-for-linuxcnc">LinuxCNC forum</a> or the
<a href="http://www.cncecke.de/forum/showthread.php?t=78549">German CNC Ecke Forum</a> or
<a href="https://lists.sourceforge.net/lists/listinfo/emc-users">LinuxCNC users mailing list</a>.</p></div>
<div class="paragraph"><p>The minimum screen resolution for GMOCCAPY, using it without side panels is <strong>979 x 750 Pixel</strong>, so it should fit to every standard screen.
It is recommended to use screens with minimum resolution of 1024x748.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_get_gmoccapy">3. How to Get GMOCCAPY</h2>
<div class="sectionbody">
<div class="paragraph"><p>GMOCCAPY 3 is included in the standard distribution of LinuxCNC since release 2.7.
So the easiest way to get GMOCCAPY on your controlling PC is just to download the <a href="https://linuxcnc.org/downloads/">ISO</a> and install it from the CD/DVD/USB-stick.
This allows you to receive updates with the regular Debian packages.</p></div>
<div class="paragraph"><p>In the <a href="gmoccapy_release_notes.txt"><strong>release notes</strong></a> aka changelist you can track the latest bugfixes and features.</p></div>
<div class="paragraph"><p>You will get a similar screen to the following (the design may vary depending on your config):</p></div>
<div class="paragraph"><p><span class="image">
<a class="image" href="images/gmoccapy_3_axis.png">
<img src="images/gmoccapy_3_axis_mid.png" alt="images/gmoccapy_3_axis_mid.png" />
</a>
</span></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_configuration">4. Basic Configuration</h2>
<div class="sectionbody">
<div class="paragraph"><p>GMOCCAPY 3 supports the following command line options:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>-user_mode</em>: If set, the setup button will be disabled, so normal machine operators are not able to edit the settings of the machine.
</p>
</li>
<li>
<p>
<em>-logo &lt;path to logo file&gt;</em>: If given, the logo will hide the jog button tab in manual mode, this is only useful for machines with hardware buttons for jogging and increment selection.
</p>
</li>
</ul></div>
<div class="paragraph"><p>There is really not to much to configure just to run GMOCCAPY,
but there are some points you should take care off if you want to use all the features of the GUI.</p></div>
<div class="paragraph"><p>You will find a lot of simulation configurations (INI files) included, just to show the basics:</p></div>
<div class="ulist"><ul>
<li>
<p>
gmoccapy.ini
</p>
</li>
<li>
<p>
gmoccapy_4_axis.ini
</p>
</li>
<li>
<p>
lathe_configs/gmoccapy_lathe.ini
</p>
</li>
<li>
<p>
lathe_configs/gmoccapy_lathe_imperial.ini
</p>
</li>
<li>
<p>
gmoccapy_left_panel.ini
</p>
</li>
<li>
<p>
gmoccapy_right_panel.ini
</p>
</li>
<li>
<p>
gmoccapy_messages.ini
</p>
</li>
<li>
<p>
gmoccapy_pendant.ini
</p>
</li>
<li>
<p>
gmoccapy_sim_hardware_button.ini
</p>
</li>
<li>
<p>
gmoccapy_tool_sensor.ini
</p>
</li>
<li>
<p>
gmoccapy_with_user_tabs.ini
</p>
</li>
<li>
<p>
gmoccapy_XYZAB.ini
</p>
</li>
<li>
<p>
gmoccapy_XYZAC.ini
</p>
</li>
<li>
<p>
gmoccapy_XYZCW.ini
</p>
</li>
<li>
<p>
gmoccapy-JA/Gantry/gantry_mm.ini
</p>
</li>
<li>
<p>
gmoccapy-JA/scara/scara.ini
</p>
</li>
<li>
<p>
gmoccapy-JA/table-rotary-tilting/xyzac-trt.ini
</p>
</li>
<li>
<p>
and a lot more &#8230;
</p>
</li>
</ul></div>
<div class="paragraph"><p>The names should explain the main intention of the different INI files.</p></div>
<div class="paragraph"><p>If you use an existing configuration of your machine, just edit your INI according to this document.</p></div>
<div class="paragraph"><p>So let us take a closer look at the INI file and what you need to include to use GMOCCAPY on your machine:</p></div>
<div class="sect2">
<h3 id="gmoccapy:display-section">4.1. The DISPLAY Section</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[DISPLAY]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">DISPLAY </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> gmoccapy</span>
<span style="font-weight: bold"><span style="color: #0000FF">PREFERENCE_FILE_PATH </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> gmoccapy_preferences</span>
<span style="font-weight: bold"><span style="color: #0000FF">MAX_FEED_OVERRIDE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 1.5</span>
<span style="font-weight: bold"><span style="color: #0000FF">MAX_SPINDLE_OVERRIDE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 1.2</span>
<span style="font-weight: bold"><span style="color: #0000FF">MIN_SPINDLE_OVERRIDE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 0.5</span>
<span style="font-weight: bold"><span style="color: #0000FF">LATHE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 1</span>
<span style="font-weight: bold"><span style="color: #0000FF">BACK_TOOL_LATHE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 1</span>
<span style="font-weight: bold"><span style="color: #0000FF">PROGRAM_PREFIX </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> ../../nc_files/</span></tt></pre></div></div>
<div class="ulist"><ul>
<li>
<p>
<em>DISPLAY = gmoccapy</em> - This tells LinuxCNC to use GMOCCAPY.
</p>
</li>
<li>
<p>
<em>PREFERENCE_FILE_PATH</em> - Gives the location and name of the preferences file to be used.
  In most cases this line will not be needed, it is used by GMOCCAPY to store your settings of the GUI,
  like themes, DRO units, colors, and keyboard settings, etc., see <a href="gmoccapy.html#gmoccapy:settings-page">settings page</a> for more details.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If no path or file is given, GMOCCAPY will use as default
&lt;your_machinename&gt;.pref, if no machine name is given in your INI File it will
use gmoccapy.pref. The file will be stored in your config directory, so the
settings will not be mixed if you use several configs. If you only want to use
one file for several machines, you need to include <code>PREFERENCE_FILE_PATH</code> in your
INI.</td>
</tr></table>
</div>
</li>
<li>
<p>
<em>MAX_FEED_OVERRIDE = 1.5</em> - Sets the maximum feed override, in the example given, you will be allowed to override the feed by 150%.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If no value is given, it will be set to 1.0.</td>
</tr></table>
</div>
</li>
<li>
<p>
<em>MIN_SPINDLE_OVERRIDE = 0.5</em> and <em>MAX_SPINDLE_OVERRIDE = 1.2</em> - Will allow you to change the spindle override within a limit from 50% to 120%.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If no values are given, MIN will be set to 0.1 and MAX to 1.0.</td>
</tr></table>
</div>
</li>
<li>
<p>
<em>LATHE = 1</em> - Set the screen layout to control a lathe.
</p>
</li>
<li>
<p>
<em>BACK_TOOL_LATHE = 1</em> - Is optional and will switch the X axis in a way you need for a back tool lathe.
  Also the keyboard shortcuts will react in a different way.
  It is allowed with GMOCCAPY to configure a lathe also with additional axes, so you may use also a XZCW config for a lathe.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">See also the <a href="gmoccapy.html#gmoccapy:lathe-section">Lathe Specific Section</a>.</td>
</tr></table>
</div>
</li>
<li>
<p>
<em>PROGRAM_PREFIX = ../../nc_files/</em> - Is the entry to tell LinuxCNC/GMOCCAPY where to look for the NGC files.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If not specified, GMOCCAPY will look in the following order for NGC files:
First <code>linuxcnc/nc_files</code> and then the users home directory.</td>
</tr></table>
</div>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="gmoccapy:traj-section">4.2. The TRAJ Section</h3>
<div class="ulist"><ul>
<li>
<p>
<em>DEFAULT_LINEAR_VELOCITY = 85.0</em> - Sets the default jog velocity of the machine.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If not set, half of <em>MAX_LINEAR_VELOCITY</em> will be used.
If that value is also not given, it will default to 180.</td>
</tr></table>
</div>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<em>MAX_LINEAR_VELOCITY = 230.0</em> - Sets the maximal velocity of the machine.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Defaults to 600 if not set.</td>
</tr></table>
</div>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="gmoccapy:macros">4.3. Macro Buttons</h3>
<div class="paragraph"><p>You can add macros to GMOCCAPY, similar to Touchy&#8217;s way.
A macro is nothing else than a NGC file.
You are able to execute complete CNC programs in MDI mode by just pushing one button.
To do so, you first have to specify the search path for macros:</p></div>
<div class="listingblock">
<a id="gmocappy:rs274ngc"></a>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[RS274NGC]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">SUBROUTINE_PATH </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> macros</span></tt></pre></div></div>
<div class="paragraph"><p>This sets the path to search for macros and other subroutines.
Several subroutine paths can be separated ":".</p></div>
<div class="paragraph"><p>Then you just have to add a section like this:</p></div>
<div class="listingblock">
<div class="title">Configuration of Five Macros to be Shown in the MDI Button List</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[MACROS]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">MACRO </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> i_am_lost</span>
<span style="font-weight: bold"><span style="color: #0000FF">MACRO </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> hello_world</span>
<span style="font-weight: bold"><span style="color: #0000FF">MACRO </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> jog_around</span>
<span style="font-weight: bold"><span style="color: #0000FF">MACRO </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> increment xinc yinc</span>
<span style="font-weight: bold"><span style="color: #0000FF">MACRO </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> go_to_position X-pos Y-pos Z-pos</span></tt></pre></div></div>
<div class="paragraph"><p>Then you have to provide the corresponding NGC files which have to follow these rules:</p></div>
<div class="ulist"><ul>
<li>
<p>
The name of the file need to be exactly the same as the name mentioned in the macro line, just with the ".ngc" extension (case sensitive).
</p>
</li>
<li>
<p>
The file must contain a subroutine like <em><strong>O&lt;i_am_lost&gt; sub</strong></em>, the name of the sub must match exactly (case sensitive) the name of the macro.
</p>
</li>
<li>
<p>
The file must end with an endsub <em><strong>O&lt;i_am_lost&gt; endsub</strong></em> followed by an <em><strong>M2</strong></em> command.
</p>
</li>
<li>
<p>
The files need to be placed in a folder specified in your INI file by <em>SUBROUTINE_PATH</em> in the RS274NGC section
</p>
</li>
</ul></div>
<div class="paragraph"><p>The code between sub and endsub will be executed by pushing the corresponding macro button.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">A maximum of 16 macros will be shown in the GUI.
Due to space reasons you may need to click on an arrow to switch the page and display hidden macro buttons.
The macro buttons will be displayed in the order of the INI entries.
It is no error placing more than 16 macros in your INI file, they will just not be shown.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">You will find the sample macros in a folder named <em>macros</em> placed in the GMOCCAPY sim folder.
If you have given several subroutine paths, they will be searched in the order of the given paths.
The first file found will be used.</td>
</tr></table>
</div>
<div class="paragraph"><p>GMOCCAPY will also accept macros asking for parameters like:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[MACRO]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">MACRO </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> go_to_position X-pos Y-pos Z-pos</span></tt></pre></div></div>
<div class="paragraph"><p>The parameters must be separated by spaces.
This example calls a file <em>go_to_position.ngc</em> with the following content:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">; Test file "go to position"</span></span>
<span style="font-style: italic"><span style="color: #9A1900">; will jog the machine to a given position</span></span>

<span style="font-weight: bold"><span style="color: #000080">O&lt;go_to_position&gt; sub</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">G17</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">G21</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">G54</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">G61</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">G40</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">G49</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">G80</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">G90</span></span>

<span style="font-style: italic"><span style="color: #9A1900">;#1 = &lt;X-Pos&gt;</span></span>
<span style="font-style: italic"><span style="color: #9A1900">;#2 = &lt;Y-Pos&gt;</span></span>
<span style="font-style: italic"><span style="color: #9A1900">;#3 = &lt;Z-Pos&gt;</span></span>

<span style="font-style: italic"><span style="color: #9A1900">(DBG, Will now move machine to X = #1 , Y = #2 , Z = #3)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">G0</span></span> <span style="color: #FF6600">X </span><span style="color: #009900">#1</span> <span style="color: #FF6600">Y </span><span style="color: #009900">#2</span> <span style="color: #FF6600">Z </span><span style="color: #009900">#3</span>

<span style="font-weight: bold"><span style="color: #000080">O&lt;go_to_position&gt; endsub</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">M2</span></span></tt></pre></div></div>
<div class="paragraph"><p>After pushing the <em><strong>execute macro button</strong></em>,
you will be asked to enter the values for <em><strong>X-pos Y-pos Z-pos</strong></em> and the macro will only run if all values have been given.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If you would like to use a macro without any movement, see also the notes in <a href="gmoccapy.html#sub:NOT_ENDING_MACROS">known problems</a>.</td>
</tr></table>
</div>
<div class="paragraph"><div class="title">Macro example using the "go to position"-macro</div><p><span class="image">
<a class="image" href="images/gmoccapy_getting_macro_info.png">
<img src="images/gmoccapy_getting_macro_info_mid.png" alt="images/gmoccapy_getting_macro_info_mid.png" />
</a>
</span></p></div>
</div>
<div class="sect2">
<h3 id="gmoccapy:configuration-of-tabs-and-side-panels">4.4. Embedded Tabs and Panels</h3>
<div class="paragraph"><p>You can add embedded programs to GMOCCAPY like you can do in AXIS, Touchy and Gscreen.
All is done by GMOCCAPY automatically if you include a few lines in your INI file in the DISPLAY section.</p></div>
<div class="paragraph"><p>If you have never used a Glade panel, I recommend to read the excellent documentation
on <a href="https://linuxcnc.org/docs/2.9/html/gui/gladevcp.html">Glade VCP</a>.</p></div>
<div class="listingblock">
<div class="title">Embedded Tab Example</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">EMBED_TAB_NAME </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> DRO</span>
<span style="font-weight: bold"><span style="color: #0000FF">EMBED_TAB_LOCATION </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> ntb_user_tabs</span>
<span style="font-weight: bold"><span style="color: #0000FF">EMBED_TAB_COMMAND </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> gladevcp -x {XID} dro.glade</span>

<span style="font-weight: bold"><span style="color: #0000FF">EMBED_TAB_NAME </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> Second user tab</span>
<span style="font-weight: bold"><span style="color: #0000FF">EMBED_TAB_LOCATION </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> ntb_preview</span>
<span style="font-weight: bold"><span style="color: #0000FF">EMBED_TAB_COMMAND </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> gladevcp -x {XID} vcp_box.glade</span></tt></pre></div></div>
<div class="paragraph"><p>All you have to take care of, is that you include for every tab or side panel the mentioned three lines:</p></div>
<div class="ulist"><ul>
<li>
<p>
EMBED_TAB_NAME = Represents the name of the tab or side panel, it is up to you what name you use, but it must be present!
</p>
</li>
<li>
<p>
EMBED_TAB_LOCATION = The place where your program will be placed in the GUI, see figure <a href="gmoccapy.html#fig:gmoccapy_emb_tab_locations">Embedded tab locations</a>. Valid values are:
</p>
<div class="ulist"><ul>
<li>
<p>
<strong>ntb_user_tabs</strong>            (as main tab, covering the complete screen)
</p>
</li>
<li>
<p>
<strong>ntb_preview</strong>              (as tab on the preview side <strong>(1)</strong>)
</p>
</li>
<li>
<p>
<strong>hbox_jog</strong>                 (will hide the jog buttons and introduce your glade file here <strong>(2)</strong>)
</p>
</li>
<li>
<p>
<strong>box_left</strong>                 (on the left, complete high of the screen)
</p>
</li>
<li>
<p>
<strong>box_right</strong>                (on the right, in between the normal screen and the button list)
</p>
</li>
<li>
<p>
<strong>box_tool_and_code_info</strong>   (will hide the Tool information and G-code frames and introduce your glade file here <strong>(3)</strong>)
</p>
</li>
<li>
<p>
<strong>box_tool_info</strong>            (will hide the Tool information frame and introduce your glade file here)
</p>
</li>
<li>
<p>
<strong>box_code_info</strong>            (will hide the G-code information frame and introduce your glade file here)
</p>
</li>
<li>
<p>
<strong>box_vel_info</strong>             (will hide the velocity frames and introduce your glade file <strong>(4)</strong>)
</p>
</li>
<li>
<p>
<strong>box_coolant_and_spindle</strong>  (will hide the coolant and spindle frames and introduce your glade file here <strong>(5)+(6)</strong>)
</p>
</li>
<li>
<p>
<strong>box_cooling</strong>              (will hide the cooling frame and introduce your glade file <strong>(5)</strong>)
</p>
</li>
<li>
<p>
<strong>box_spindle</strong>              (will hide the spindle frame and introduce your glade file <strong>(6)</strong>)
</p>
</li>
<li>
<p>
<strong>box_custom_1</strong>             (will introduce your glade file left of vel_frame)
</p>
</li>
<li>
<p>
<strong>box_custom_2</strong>             (will introduce your glade file left of cooling_frame)
</p>
</li>
<li>
<p>
<strong>box_custom_3</strong>             (will introduce your glade file left of spindle_frame)
</p>
</li>
<li>
<p>
<strong>box_custom_4</strong>             (will introduce your glade file right of spindle_frame)
</p>
</li>
<li>
<p>
<strong>box_dro_side</strong>             (will introduce your glade file right of the DRO)
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">See also the included sample INI files to see the differences.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
EMBED_TAB_COMMAND = The command to execute, i.e.
</p>
<div class="listingblock">
<div class="content">
<pre><code>gladevcp -x {XID} dro.glade</code></pre>
</div></div>
<div class="paragraph"><p>includes a custom glade file called dro.glade in the mentioned location.
The file must be placed in the config folder of your machine.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>gladevcp h_buttonlist.glade</code></pre>
</div></div>
<div class="paragraph"><p>will just open a new user window called h_buttonlist.glade note the difference.
This one is stand alone, and can be moved around independent from GMOCCAPY window.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>gladevcp -c gladevcp -u hitcounter.py -H manual-example.hal manual-example.ui</code></pre>
</div></div>
<div class="paragraph"><p>will add a the panel manual-example.ui, include a custom Python handler,
hitcounter.py and make all connections after realizing the panel according to manual-example.hal.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>hide</code></pre>
</div></div>
<div class="paragraph"><p>will hide the chosen box.</p></div>
</li>
</ul></div>
<div class="imageblock" id="fig:gmoccapy_emb_tab_locations" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_embedded_tabs.png" alt="images/gmoccapy_embedded_tabs.png"/>
<figcaption class="title"> Figure 1. Embedded tab locations</figcaption>
</figure>
</div>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If you make any HAL connections to your custom glade panel, you need to do that in the HAL file specified in the EMBED_TAB_COMMAND line,
otherwise you may get an error that the HAL pin does not exist&#8201;&#8212;&#8201;this is because of race conditions loading the HAL files.
Connections to GMOCCAPY HAL pins need to be made in the postgui HAL file specified in your INI file,
because these pins do not exist prior of realizing the GUI.</td>
</tr></table>
</div>
<div class="paragraph"><p>Here are some examples:</p></div>
<div class="tableblock">
<table rules="none" class="tableblock"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="43%" />
<col width="56%" />
<tbody>
<tr>
<td align="left" valign="top"><div><div class="paragraph"><div class="title">ntb_preview</div><p><span class="image">
<a class="image" href="images/gmoccapy_ntb_preview.png">
<img src="images/gmoccapy_ntb_preview_small.png" alt="images/gmoccapy_ntb_preview_small.png" />
</a>
</span></p></div></div></td>
<td align="left" valign="top"><div><div class="paragraph"><div class="title">box_right - and GMOCCAPY in MDI mode</div><p><span class="image">
<a class="image" href="images/gmoccapy_with_right_panel_in_MDI_mode.png">
<img src="images/gmoccapy_with_right_panel_in_MDI_mode_small.png" alt="images/gmoccapy_with_right_panel_in_MDI_mode_small.png" />
</a>
</span></p></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="sub:gmocccapy-configuration-user-messages">4.5. User Created Messages</h3>
<div class="paragraph"><p>GMOCCAPY has the ability to create HAL driven user messages.
To use them you need to introduce some lines in the [DISPLAY] section of the INI file.</p></div>
<div class="paragraph"><p>These three lines are needed to define a user pop up message dialog:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TEXT    </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> The text to be displayed, may be pango markup formatted</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TYPE    </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> "status" , "okdialog" , "yesnodialog"</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_PINNAME </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> is the name of the HAL pin group to be created</span></tt></pre></div></div>
<div class="paragraph"><p>The messages support pango markup language. Detailed information about the
markup language can be found at
<a href="https://developer.gnome.org/pango/stable/PangoMarkupFormat.html">Pango Markup</a>.</p></div>
<div class="paragraph"><p>The following three dialog types are available:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>status</strong> - Will just display a message as pop up window, using the messaging system of GMOCCAPY.
</p>
</li>
<li>
<p>
<strong>okdialog</strong> - Will hold focus on the message dialog and will activate a <code>-waiting</code> HAL pin.
</p>
</li>
<li>
<p>
<strong>yesnodialog</strong> - Will hold focus on the message dialog and will activate a <code>-waiting</code> HAL pin and provide a <code>-response</code> HAL pin.
</p>
</li>
</ul></div>
<div class="paragraph"><p>For more detailed information of the pins see <a href="gmoccapy.html#gmoccapy:user-created-message">User Created Message HAL Pins</a>.</p></div>
<div class="listingblock">
<div class="title">Example of User Message Configuration</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TEXT </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> This is a &lt;span background="#ff0000" foreground="#ffffff"&gt;info-message&lt;/span&gt; test</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TYPE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> status</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_PINNAME </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> statustest</span>

<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TEXT </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> This is a yes no dialog test</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TYPE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> yesnodialog</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_PINNAME </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> yesnodialog</span>

<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TEXT </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> Text can be &lt;small&gt;small&lt;/small&gt;, &lt;big&gt;big&lt;/big&gt;, &lt;b&gt;bold&lt;/b &lt;i&gt;italic&lt;/i&gt;, and even be &lt;span color="red"&gt;colored&lt;/span&gt;.</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TYPE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> okdialog</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_PINNAME </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> okdialog</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Currently the formatting doesn&#8217;t work.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_preview_control">4.6. Preview Control</h3>
<div class="paragraph"><p>Magic comments can be used to control the G-code preview.
On very large programs the preview can take a long time to load.
You can control what is shown and what is hidden on the graphics screen by adding the appropriate comments from this list into your G-code:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>(PREVIEW,hide)
&lt;G-code to be hidden&gt;
(PREVIEW,show)</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_user_command_file">4.7. User Command File</h3>
<div class="paragraph"><p>If a file <code>~/.gmoccapyrc</code> exists, its contents are executed as Python source code just after
the GUI is displayed. The details of what may be written in the <code>~/.gmoccapyrc</code> are subject
to change during the development cycle.</p></div>
<div class="paragraph"><p>A configuration-specific Python file may be specified with an INI file setting</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[DISPLAY]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">USER_COMMAND_FILE</span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900">filename.py</span></tt></pre></div></div>
<div class="paragraph"><p>If this file is specified, this file is sourced just after the AXIS GUI is displayed
<strong>instead</strong> of <code>~/.gmoccapyrc</code>.</p></div>
<div class="paragraph"><p>The following example changes the size of the vertical buttons:
.Example of .axisrc file</p></div>
<div class="listingblock">
<div class="content">
<pre><code>self.widgets.vbtb_main.set_size_request(85,-1)
BB_SIZE = (70, 70) # default = (90, 56)
self.widgets.tbtn_estop.set_size_request(*BB_SIZE)
self.widgets.tbtn_on.set_size_request(*BB_SIZE)
self.widgets.rbt_manual.set_size_request(*BB_SIZE)
self.widgets.rbt_mdi.set_size_request(*BB_SIZE)
self.widgets.rbt_auto.set_size_request(*BB_SIZE)
self.widgets.tbtn_setup.set_size_request(*BB_SIZE)
self.widgets.tbtn_user_tabs.set_size_request(*BB_SIZE)
self.widgets.btn_exit.set_size_request(*BB_SIZE)</code></pre>
</div></div>
<div class="paragraph"><p>The widget names can the looked up in the /usr/share/gmoccapy.glade file</p></div>
</div>
<div class="sect2">
<h3 id="_user_css_file">4.8. User CSS File</h3>
<div class="paragraph"><p>Similar to the User command file it&#8217;s possible to influence the appearance by cascading style sheets (CSS).
If a file <code>~/.gmoccapy_css</code> exists, its contents are loaded into the stylesheet provider and are so beeing applied to the GUI.</p></div>
<div class="paragraph"><p>A configuration-specific CSS file may be specified with an INI file setting</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[DISPLAY]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">USER_CSS_FILE</span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900">filename.css</span></tt></pre></div></div>
<div class="paragraph"><p>If this file is specified, this file is used <strong>instead</strong> of <code>~/.gmoccapy_css</code>.</p></div>
<div class="paragraph"><p>Information what can be controlled by CSS can be found here: <a href="https://docs.gtk.org/gtk3/css-overview.html">Overview of CSS in GTK</a></p></div>
<div class="paragraph"><p>Here an example how the color of checked buttons can be set to yellow:
.Example Yellow color for checked buttons</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>button<span style="color: #990000">:</span>checked <span style="color: #FF0000">{</span>
    <span style="color: #0000FF">background:</span> <span style="font-style: italic"><span style="color: #009900">rgba</span></span>(<span style="font-style: italic"><span style="color: #009900">250</span></span>,<span style="font-style: italic"><span style="color: #009900">230</span></span>,<span style="font-style: italic"><span style="color: #009900">0</span></span>,<span style="font-style: italic"><span style="color: #009900">0.8</span></span>);
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_logging">4.9. Logging</h3>
<div class="paragraph"><p>GMOCCAPY supports specifying the level of information (log level) that will be printed to the console and to the log file.</p></div>
<div class="paragraph"><p>The order is <em>VERBOSE</em>, <em>DEBUG</em>, <em>INFO</em>, <em>WARNING</em>, <em>ERROR</em>, <em>CRITICAL</em>.
Default is <em>WARNING</em>, that means <em>WARNING</em>, <em>ERROR</em> and <em>CRITICAL</em> are printed.</p></div>
<div class="paragraph"><p>You can specify the log level in the INI file like this:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[DISPLAY]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">DISPLAY </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> gmoccapy &lt;log_level_param&gt;</span></tt></pre></div></div>
<div class="paragraph"><p>using these parameters:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Log level   &lt;log_level_param&gt;
DEBUG       -d
INFO        -i
VERBOSE     -v
ERROR       -q</code></pre>
</div></div>
<div class="listingblock">
<div class="title">Example: Configure logging to print only errors</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[DISPLAY]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">DISPLAY </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> gmoccapy -q</span></tt></pre></div></div>
<div class="paragraph"><p>You can specify where to save the log file:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[DISPLAY]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">LOG_FILE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> gmoccapy.log</span></tt></pre></div></div>
<div class="paragraph"><p>If <code>LOG_FILE</code> is not set, logging happens to <code>$HOME/&lt;base_log_name&gt;.log</code></p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hal_pins">5. HAL Pins</h2>
<div class="sectionbody">
<div class="paragraph"><p>GMOCCAPY exports several HAL pins to be able to react to hardware devices.
The goal is to get a GUI that may be operated in a tool shop, completely/mostly without mouse or keyboard.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph"><p>You will have to do all connections to GMOCCAPY pins in your postgui.hal file.
When GMOCCAPY is started, it creates the HAL pins for the GUI then it executes the post-GUI HAL file named in the INI file:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[HAL]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">POSTGUI_HALFILE</span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900">&lt;filename&gt;</span></tt></pre></div></div>
<div class="paragraph"><p>Typically <code>&lt;filename&gt;</code> would be the configs base name + <code>_postgui.hal</code>, e.g. <code>lathe_postgui.hal</code>, but can be any legal filename.<br />
These commands are executed after the screen is built, guaranteeing the widget&#8217;s HAL pins are available.<br />
You can have multiple line of <code>POSTGUI_HALFILE=&lt;filename&gt;</code> in the INI file.
Each will be run one after the other in the order they appear.</p></div>
</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_right_and_bottom_button_lists">5.1. Right and Bottom Button Lists</h3>
<div class="paragraph"><p>The screen has two main button lists, one on the right side an one on the bottom.
The right handed buttons will not change during operation, but the bottom button list will change very often.
The buttons are count from up to down and from left to right beginning with 0.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The pin names have changed in GMOCCAPY 2 to order them in a better way.</td>
</tr></table>
</div>
<div class="paragraph"><p>The pins for the right (vertical) buttons are:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.v-button.button-0</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.v-button.button-1</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.v-button.button-2</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.v-button.button-3</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.v-button.button-4</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.v-button.button-5</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.v-button.button-6</strong> <em>(bit IN)</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>For the bottom (horizontal) buttons they are:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.h-button.button-0</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-1</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-2</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-3</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-4</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-5</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-6</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-7</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-8</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.h-button.button-9</strong> <em>(bit IN)</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>As the buttons in the bottom list will change according to the mode and other influences,
the hardware buttons will activate the displayed functions.
So you don&#8217;t have to take care about switching functions around in HAL, because that is done completely by GMOCCAPY!</p></div>
<div class="paragraph"><p>For a three axes XYZ machine the HAL pins will react as shown in the following three tables:</p></div>
<div class="tableblock" id="table:a">
<table rules="all" class="tableblock"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<caption class="title">Table 1. Functional assignment of horizontal buttons (1)</caption>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
<thead>
<tr>
<th align="left" valign="top"> Pin                         </th>
<th align="left" valign="top"> Manual Mode                                   </th>
<th align="left" valign="top"> MDI Mode                                    </th>
<th align="left" valign="top"> Auto Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-0</code></p></td>
<td align="left" valign="top"><p class="table">open homing button</p></td>
<td align="left" valign="top"><p class="table">macro_0 or nothing</p></td>
<td align="left" valign="top"><p class="table">open file</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-1</code></p></td>
<td align="left" valign="top"><p class="table">open touch off stuff</p></td>
<td align="left" valign="top"><p class="table">macro_1 or nothing</p></td>
<td align="left" valign="top"><p class="table">reload program</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-2</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">macro_2 or nothing</p></td>
<td align="left" valign="top"><p class="table">run</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-3</code></p></td>
<td align="left" valign="top"><p class="table">open tool dialogs</p></td>
<td align="left" valign="top"><p class="table">macro_3 or nothing</p></td>
<td align="left" valign="top"><p class="table">stop</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-4</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">macro_4 or nothing</p></td>
<td align="left" valign="top"><p class="table">pause</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-5</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">macro_5 or nothing</p></td>
<td align="left" valign="top"><p class="table">step by step</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-6</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">macro_6 or nothing</p></td>
<td align="left" valign="top"><p class="table">run from line if enabled in settings, otherwise Nothing</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-7</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">macro_7 or nothing</p></td>
<td align="left" valign="top"><p class="table">optional blocks</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-8</code></p></td>
<td align="left" valign="top"><p class="table">full-size preview</p></td>
<td align="left" valign="top"><p class="table">macro_8 or switch page to additional macros</p></td>
<td align="left" valign="top"><p class="table">full-size preview</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-9</code></p></td>
<td align="left" valign="top"><p class="table">exit if machine is off, otherwise no reaction</p></td>
<td align="left" valign="top"><p class="table">open keyboard or abort if macro is running</p></td>
<td align="left" valign="top"><p class="table">edit code</p></td>
</tr>
</tbody>
</table>
</div>
<div class="tableblock" id="table:b">
<table rules="all" class="tableblock"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<caption class="title">Table 2. Functional assignment of horizontal buttons (2)</caption>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
<thead>
<tr>
<th align="left" valign="top"> Pin                        </th>
<th align="left" valign="top"> Settings Mode         </th>
<th align="left" valign="top"> Homing Mode </th>
<th align="left" valign="top"> Touch off Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-0</code></p></td>
<td align="left" valign="top"><p class="table">delete MDI history</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">edit offsets</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-1</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">home all</p></td>
<td align="left" valign="top"><p class="table">touch X</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-2</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">touch Y</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-3</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">home x</p></td>
<td align="left" valign="top"><p class="table">touch Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-4</code></p></td>
<td align="left" valign="top"><p class="table">open classic ladder</p></td>
<td align="left" valign="top"><p class="table">home y</p></td>
<td align="left" valign="top"><p class="table"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-5</code></p></td>
<td align="left" valign="top"><p class="table">open HAL scope</p></td>
<td align="left" valign="top"><p class="table">home z</p></td>
<td align="left" valign="top"><p class="table"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-6</code></p></td>
<td align="left" valign="top"><p class="table">open HAL status</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">zero G92</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-7</code></p></td>
<td align="left" valign="top"><p class="table">open HAL meter</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-8</code></p></td>
<td align="left" valign="top"><p class="table">open HAL calibration</p></td>
<td align="left" valign="top"><p class="table">unhome all</p></td>
<td align="left" valign="top"><p class="table">set selected</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-9</code></p></td>
<td align="left" valign="top"><p class="table">open HAL show</p></td>
<td align="left" valign="top"><p class="table">back</p></td>
<td align="left" valign="top"><p class="table">back</p></td>
</tr>
</tbody>
</table>
</div>
<div class="tableblock" id="table:c">
<table rules="all" class="tableblock"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<caption class="title">Table 3. Functional assignment of horizontal buttons (3)</caption>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
<thead>
<tr>
<th align="left" valign="top"> Pin                        </th>
<th align="left" valign="top"> Tool Mode                                </th>
<th align="left" valign="top"> Edit Mode     </th>
<th align="left" valign="top"> Select File</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-0</code></p></td>
<td align="left" valign="top"><p class="table">delete tool(s)</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">go to home directory</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-1</code></p></td>
<td align="left" valign="top"><p class="table">new tool</p></td>
<td align="left" valign="top"><p class="table">reload file</p></td>
<td align="left" valign="top"><p class="table">one directory level up</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-2</code></p></td>
<td align="left" valign="top"><p class="table">reload tool table</p></td>
<td align="left" valign="top"><p class="table">save</p></td>
<td align="left" valign="top"><p class="table"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-3</code></p></td>
<td align="left" valign="top"><p class="table">apply changes</p></td>
<td align="left" valign="top"><p class="table">save as</p></td>
<td align="left" valign="top"><p class="table">move selection left</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-4</code></p></td>
<td align="left" valign="top"><p class="table">change tool by number T? M6</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">move selection right</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-5</code></p></td>
<td align="left" valign="top"><p class="table">set tool by number without change M61 Q?</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">jump to directory as set in settings</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-6</code></p></td>
<td align="left" valign="top"><p class="table">change tool to the selected one</p></td>
<td align="left" valign="top"><p class="table">new file</p></td>
<td align="left" valign="top"><p class="table"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-7</code></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">select / ENTER</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-8</code></p></td>
<td align="left" valign="top"><p class="table">touch of tool in Z</p></td>
<td align="left" valign="top"><p class="table">show keyboard</p></td>
<td align="left" valign="top"><p class="table"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>gmoccapy.h-button.button-9</code></p></td>
<td align="left" valign="top"><p class="table">back</p></td>
<td align="left" valign="top"><p class="table">back</p></td>
<td align="left" valign="top"><p class="table">back</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>So we have 67 reactions with only 10 HAL pins!</p></div>
<div class="paragraph"><p>These pins are made available to be able to use the screen without an touch panel,
or protect it from excessive use by placing hardware buttons around the panel.
They are available in a sample configuration like shown in the <a href="#gmoccapy-sim-hardware-button">image below</a>.</p></div>
<div class="paragraph" id="gmoccapy-sim-hardware-button"><div class="title">Sample configuration "gmoccapy_sim_hardware_button" showing the side buttons</div><p><span class="image">
<a class="image" href="images/gmoccapy_sim_hardware_button.png">
<img src="images/gmoccapy_sim_hardware_button_mid.png" alt="images/gmoccapy_sim_hardware_button_mid.png" />
</a>
</span></p></div>
</div>
<div class="sect2">
<h3 id="_velocities_and_overrides">5.2. Velocities and Overrides</h3>
<div class="paragraph"><p>All sliders from GMOCCAPY can be connected to hardware encoders or hardware potentiometers.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">For GMOCCAPY 3 some HAL pin names have changed when new controls have been implemented.
Max velocity does not exist any more, it was replaced by rapid override due to the demand of many users.</td>
</tr></table>
</div>
<div class="paragraph"><p>To connect encoders, the following pins are exported:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.jog.jog-velocity.counts</strong>                <em>(s32 IN)</em> - Jog velocity
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-velocity.count-enable</strong>          <em>(bit IN)</em> - Must be True, to enable counts
</p>
</li>
<li>
<p>
<strong>gmoccapy.feed.feed-override.counts</strong>              <em>(s32 IN)</em> - feed override
</p>
</li>
<li>
<p>
<strong>gmoccapy.feed.feed-override.count-enable</strong>        <em>(bit IN)</em> - Must be True, to enable counts
</p>
</li>
<li>
<p>
<strong>gmoccapy.feed.reset-feed-override</strong>               <em>(bit IN)</em> - reset the feed override to *0%
</p>
</li>
<li>
<p>
<strong>gmoccapy.spindle.spindle-override.counts</strong>        <em>(s32 IN)</em> - spindle override
</p>
</li>
<li>
<p>
<strong>gmoccapy.spindle.spindle-override.count-enable</strong>  <em>(bit IN)</em> - Must be True, to enable counts
</p>
</li>
<li>
<p>
<strong>gmoccapy.spindle.reset-spindle-override</strong>         <em>(bit IN)</em> - reset the spindle override to *0%
</p>
</li>
<li>
<p>
<strong>gmoccapy.rapid.rapid-override.counts</strong>            <em>(s32 IN)</em> - Maximal Velocity of the *chine
</p>
</li>
<li>
<p>
<strong>gmoccapy.rapid.rapid-override.count-enable</strong>      <em>(bit IN)</em> - Must be True, to enable counts
</p>
</li>
</ul></div>
<div class="paragraph"><p>To connect potentiometers, use the following pins:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.jog.jog-velocity.direct-value</strong>          <em>(float IN)</em> - To adjust the jog velocity slider
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-velocity.analog-enable</strong>         <em>(bit IN)</em>   - Must be True, to allow analog inputs
</p>
</li>
<li>
<p>
<strong>gmoccapy.feed.feed-override.direct-value</strong>        <em>(float IN)</em> - To adjust the feed override slider
</p>
</li>
<li>
<p>
<strong>gmoccapy.feed.feed-override.analog-enable</strong>       <em>(bit IN)</em>   - Must be True, to allow analog inputs
</p>
</li>
<li>
<p>
<strong>gmoccapy.spindle.spindle-override.direct-value</strong>  <em>(float IN)</em> - To adjust the spindle override slider
</p>
</li>
<li>
<p>
<strong>gmoccapy.spindle.spindle-override.analog-enable</strong> <em>(bit IN)</em>   - Must be True, to allow analog inputs
</p>
</li>
<li>
<p>
<strong>gmoccapy.rapid.rapid-override.direct-value</strong>      <em>(float)</em>    - To adjust the max velocity slider
</p>
</li>
<li>
<p>
<strong>gmoccapy.rapid.rapid-override.analog-enable</strong>     <em>(bit IN)</em>   - Must be True, to allow analog inputs
</p>
</li>
</ul></div>
<div class="paragraph"><p>In addition, GMOCCAPY 3 offers additional HAL pins to control the new slider widgets with momentary switches.
The values how fast the increase or decrease will be, must be set in the glade file.
In a future release it will be integrated in the settings page.</p></div>
<div class="ulist"><div class="title">SPEED</div><ul>
<li>
<p>
<strong>gmoccapy.spc_jog_vel.increase</strong>      <em>(bit IN)</em>    - As long as True the value of the slider will increase
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_jog_vel.decrease</strong>      <em>(bit IN)</em>    - As long as True the value of the slider will decrease
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_jog_vel.scale</strong>         <em>(float IN)</em>  - A value to scale the output value (handy to change units/min to units/sec)
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_jog_vel.value</strong>         <em>(float OUT)</em> - Value of the widget
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_jog_vel.scaled-value</strong>  <em>(float OUT)</em> - Scaled value of the widget
.FEED
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_feed.increase</strong>         <em>(bit IN)</em>    - As long as True the value of the slider will increase
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_feed.decrease</strong>         <em>(bit IN)</em>    - As long as True the value of the slider will decrease
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_feed.scale</strong>            <em>(float IN)</em>  - A value to scale the output value (handy to change units/min to units/sec)
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_feed.value</strong>            <em>(float OUT)</em> - Value of the widget
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_feed.scaled-value</strong>     <em>(float OUT)</em> - Scaled value of the widget
.SPINDLE
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_spindle.increase</strong>      <em>(bit IN)</em>    - As long as True the value of the slider will increase
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_spindle.decrease</strong>      <em>(bit IN)</em>    - As long as True the value of the slider will decrease
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_spindle.scale</strong>         <em>(float IN)</em>  - A value to scale the output value (handy to change units/min to units/sec)
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_spindle.value</strong>         <em>(float OUT)</em> - Value of the widget
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_spindle.scaled-value</strong>  <em>(float OUT)</em> - Scaled value of the widget
.RAPIDS
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_rapid.increase</strong>        <em>(bit IN)</em>    - As long as True the value of the slider will increase
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_rapid.decrease</strong>        <em>(bit IN)</em>    - As long as True the value of the slider will decrease
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_rapid.scale</strong>           <em>(float IN)</em>  - A value to scale the output value (handy to change units/min to units/sec)
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_rapid.value</strong>           <em>(float OUT)</em> - Value of the widget
</p>
</li>
<li>
<p>
<strong>gmoccapy.spc_rapid.scaled-value</strong>    <em>(float OUT)</em> - Scaled value of the widget
</p>
</li>
</ul></div>
<div class="paragraph"><p>The float pins do accept values from 0.0 to 1.0, being the percentage value you want to set the slider value.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">If you use both connection types, do not connect the same slider to both pin as the influences between the two has not been tested!
Different sliders may be connected to the one or other HAL connection type.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">Please be aware that the jog velocity depends on the turtle button state.
It will lead to different slider scales depending on the mode (turtle or rabbit).
Please take also a look at <a href="gmoccapy.html#gmoccapy:jog-velocity">jog velocities and turtle-jog HAL pin</a> for more details.</td>
</tr></table>
</div>
<div class="exampleblock">
<div class="title">Example 1. Setting a slider value</div>
<div class="content">
<div class="paragraph"><p>Spindle Override Min Value =  20 %<br />
Spindle Override Max Value = 120 %<br />
gmoccapy.analog-enable = 1<br />
gmoccapy.spindle-override-value = 0.25<br />
<br />
value to set = Min Value + (Max Value - Min Value) * gmoccapy.spindle-override-value<br />
value to set = 20 + (120 - 20) * 0.25<br />
value to set = 45 %<br /></p></div>
</div></div>
</div>
<div class="sect2">
<h3 id="_jog_hal_pins">5.3. Jog HAL Pins</h3>
<div class="paragraph"><p>All axes given in the INI file have a jog-plus and a jog-minus pin, so hardware momentary switches can be used to jog the axes.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Naming of these HAL pins have changed in GMOCCAPY 2.</td>
</tr></table>
</div>
<div class="paragraph"><p>For the standard XYZ config following HAL pins will be available:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.jog.axis.jog-x-plus</strong>  <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.axis.jog-x-minus</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.axis.jog-y-plus</strong>  <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.axis.jog-y-minus</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.axis.jog-z-plus</strong>  <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.axis.jog-z-minus</strong> <em>(bit IN)</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>If you use a 4 axes configuration, there will be two additional pins:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.jog.jog-&lt;your fourth axis letter &gt;-plus</strong>  <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-&lt;your fourth axis letter &gt;-minus</strong> <em>(bit IN)</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>For a C-axis you will see:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.jog.axis.jog-c-plus</strong>  <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.axis.jog-c-minus</strong> <em>(bit IN)</em>
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="gmoccapy:jog-velocity">5.4. Jog Velocities and Turtle-Jog HAL Pin</h3>
<div class="paragraph"><p>The jog velocity can be selected with the corresponding slider.
The scale of the slider will be modified if the turtle button (the one showing a rabbit or a turtle) has been toggled.
If the button is not visible, it might have been disabled on the <a href="#gmoccapy:turtle-jog">settings page</a>.
If the button shows the rabbit-icon, the scale is from min to max machine velocity.
If it shows the turtle, the scale will reach only 1/20 of max velocity by default.
The used divider can be set on the <a href="#gmoccapy:turtle-jog">settings page</a>.</p></div>
<div class="paragraph"><p>So using a touch screen it is much easier to select smaller velocities.</p></div>
<div class="paragraph"><p>GMOCCAPY offers this HAL pin to toggle between turtle and rabbit jogging:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.jog.turtle-jog</strong> <em>(bit IN)</em>
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_jog_increment_hal_pins">5.5. Jog Increment HAL Pins</h3>
<div class="paragraph"><p>The jog increments given in the INI file like</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[DISPLAY]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">INCREMENTS </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 5mm 1mm .5mm .1mm .05mm .01mm</span></tt></pre></div></div>
<div class="paragraph"><p>are selectable through HAL pins, so a selection hardware switch can be used to select the increment to use.
There will be a maximum of 10 HAL pins for the increments given in the INI file.
If you give more increments in your INI file, they will be not reachable from the GUI as they will not be displayed.</p></div>
<div class="paragraph"><p>If you have 6 increments in your INI file like in the example above, you will get <strong>7</strong> pins:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.jog.jog-inc-0</strong> <em>(bit IN)</em> - This one is fixed and will represent continuous jogging.
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-inc-1</strong> <em>(bit IN)</em> - First increment given in the INI file.
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-inc-2</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-inc-3</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-inc-4</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-inc-5</strong> <em>(bit IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.jog.jog-inc-6</strong> <em>(bit IN)</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>GMOCCAPY offers also a HAL pin to output the selected jog increment:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.jog.jog-increment</strong> <em>(float OUT)</em>
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="gmoccapy:hardware-unlock">5.6. Hardware Unlock Pin</h3>
<div class="paragraph"><p>To be able to use a key switch to unlock the settings page, the following
pin is exported:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.unlock-settings</strong> <em>(bit IN)</em> - The settings page is unlocked if the pin is high.
  To use this pin, you need to activate it on the settings page.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_error_warning_pins">5.7. Error/Warning Pins</h3>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.error</strong> <em>(bit OUT)</em> - Indicates an error, so a light can lit or even the machine may be stopped. It will be reset with the pin <code>gmoccapy.delete-message</code>.
</p>
</li>
<li>
<p>
<strong>gmoccapy.delete-message</strong> <em>(bit IN)</em> - Will delete the first error and reset the <code>gmoccapy.error</code> pin to false after the last error has been cleared.
</p>
</li>
<li>
<p>
<strong>gmoccapy.warning-confirm</strong> <em>(bit IN)</em> - Confirms warning dialog like click on OK
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph"><p>Messages or user infos will not affect the <code>gmoccapy.error</code> pin, but the <code>gmoccapy.delete-message</code> pin will delete the last message if no error is shown!</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="gmoccapy:user-created-message">5.8. User Created Message HAL Pins</h3>
<div class="paragraph"><p>GMOCCAPY may be configured to react to external errors, using 3 different user messages:</p></div>
<div class="ulist"><div class="title">status</div><ul>
<li>
<p>
<strong>gmoccapy.messages.status</strong> <em>(bit IN)</em> - Triggers the dialog.
</p>
</li>
</ul></div>
<div class="ulist"><div class="title">okdialog</div><ul>
<li>
<p>
<strong>gmoccapy.messages.okdialog</strong> <em>(bit IN)</em> - Triggers the dialog.
</p>
</li>
<li>
<p>
<strong>gmoccapy.messages.okdialog-waiting</strong> <em>(bit OUT)</em> - Will be <em>1</em> as long as the dialog is open. Closing the message will reset the this pin.
</p>
</li>
</ul></div>
<div class="ulist"><div class="title">yesnodialog</div><ul>
<li>
<p>
<strong>gmoccapy.messages.yesnodialog</strong> <em>(bit IN)</em> - Triggers the dialog.
</p>
</li>
<li>
<p>
<strong>gmoccapy.messages.yesnodialog-waiting</strong> <em>(bit OUT)</em> - Will be <em>1</em> as long as the dialog is open. Closing the message will reset the this pin.
</p>
</li>
<li>
<p>
<strong>gmoccapy.messages.yesnodialog-response</strong> <em>(bit OUT)</em> - This pin will change to <em>1</em> if the user clicks OK and in all other cases it will be <em>0</em>.
  This pin will remain <em>1</em> until the dialog is called again.
</p>
</li>
</ul></div>
<div class="paragraph"><p>To add a user created message you need to add the message to the INI file in the DISPLAY section.
See <a href="gmoccapy.html#sub:gmocccapy-configuration-user-messages">Configuration of User Created Messages</a>.</p></div>
<div class="listingblock">
<div class="title">User Message Example (INI file)</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TEXT </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> LUBE FAULT</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TYPE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> okdialog</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_PINNAME </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> lube-fault</span>

<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TEXT </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> X SHEAR PIN BROKEN</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_TYPE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> status</span>
<span style="font-weight: bold"><span style="color: #0000FF">MESSAGE_PINNAME </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> pin</span></tt></pre></div></div>
<div class="paragraph"><p>To connect these new pins you need to do this in the postgui HAL file.
Here are some example connections which connect the message signals to some place else in the HAL file.</p></div>
<div class="listingblock">
<div class="title">Example Connection of User Messages (HAL file)</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">gmoccapy-lube-fault</span></span> <span style="color: #009900">gmoccapy.messages.lube-fault</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">gmoccapy-lube-fault-waiting</span></span> <span style="color: #009900">gmoccapy.messages.lube-fault-waiting</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">gmoccapy-pin</span></span> <span style="color: #009900">gmoccapy.messages.pin</span></tt></pre></div></div>
<div class="paragraph"><p>For more information about HAL files and the net command see the
<a href="../hal/basic-hal.html#cha:basic-hal-reference">HAL Basics</a>.</p></div>
</div>
<div class="sect2">
<h3 id="_spindle_feedback_pins">5.9. Spindle Feedback Pins</h3>
<div class="paragraph"><p>There are two pins for spindle feedback:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.spindle_feedback_bar</strong> <em>(float IN)</em> - Pin to show the spindle speed on the spindle bar.
</p>
</li>
<li>
<p>
<strong>gmoccapy.spindle_at_speed_led</strong> <em>(bit IN)</em> - Pin to lit the is-at-speed-led.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_pins_to_indicate_program_progress_information">5.10. Pins to Indicate Program Progress Information</h3>
<div class="paragraph"><p>There are three pins giving information about the program progress:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.program.length</strong> <em>(s32 OUT)</em> - Shows the total number of lines of the program.
</p>
</li>
<li>
<p>
<strong>gmoccapy.program.current-line</strong> <em>(s32 OUT)</em> - Indicates the current working line of the program.
</p>
</li>
<li>
<p>
<strong>gmoccapy.program.progress</strong> <em>(float OUT)</em> - Gives the program progress in percentage.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The values may not be very accurate if you are working with subroutines or large remap procedures.
Also loops will cause different values.</p></div>
</div>
<div class="sect2">
<h3 id="_tool_related_pins">5.11. Tool Related Pins</h3>
<div class="paragraph"><div class="title">Tool Change Pins</div><p>These pins are provided to use GMOCCAPY&#8217;s internal tool change dialog, similar to the one known from AXIS, but with several modifications.
So you will not only get the message to change to <em>tool number 3</em>, but also the description of that tool like <em>7.5 mm 3 flute cutter</em>.
The information is taken from the tool table, so it is up to you what to display.</p></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_manual_toolchange.png" alt="Manual tool change"/>
<figcaption class="title"> Figure 2. GMOCCAPY tool change dialog</figcaption>
</figure>
</div>
</div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.toolchange-number</strong>  <em>(s32 IN)</em> - The number of the tool to be changed
</p>
</li>
<li>
<p>
<strong>gmoccapy.toolchange-change</strong>  <em>(bit IN)</em> - Indicates that a tool has to be changed
</p>
</li>
<li>
<p>
<strong>gmoccapy.toolchange-changed</strong> <em>(bit OUT)</em> - Indicates tool has been changed
</p>
</li>
<li>
<p>
<strong>gmoccapy.toolchange-confirm</strong> <em>(bit IN)</em> - Confirms tool change
</p>
</li>
</ul></div>
<div class="paragraph"><p>Usually they are connected like this for a manual tool change:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tool-change</span></span> <span style="color: #009900">gmoccapy.toolchange-change</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">iocontrol.0.tool-change</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tool-changed</span></span> <span style="color: #009900">gmoccapy.toolchange-changed</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">iocontrol.0.tool-changed</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tool-prep-number</span></span> <span style="color: #009900">gmoccapy.toolchange-number</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">iocontrol.0.tool-prep-number</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tool-prep-loop</span></span> <span style="color: #009900">iocontrol.0.tool-prepare</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">iocontrol.0.tool-prepared</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Please take care, that this connections have to be done in the postgui HAL file.</td>
</tr></table>
</div>
<div class="paragraph"><div class="title">Tool Offset Pins</div><p>These pins allow you to show the active tool offset values for X and Z in the tool information frame.
You should know that they are only active after G43 has been sent.</p></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_tool_info.png" alt="Tool information"/>
<figcaption class="title"> Figure 3. Tool information area</figcaption>
</figure>
</div>
</div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.tooloffset-x</strong> <em>(float IN)</em>
</p>
</li>
<li>
<p>
<strong>gmoccapy.tooloffset-z</strong> <em>(float IN)</em>
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The tooloffset-x line is not needed on a mill, and will not be displayed on a mill with trivial kinematics.</td>
</tr></table>
</div>
<div class="paragraph"><p>To display the current offsets, the pins have to be connected like this in the postgui HAL file:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tooloffset-x</span></span> <span style="color: #009900">gmoccapy.tooloffset-x</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">motion.tooloffset.x</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tooloffset-z</span></span> <span style="color: #009900">gmoccapy.tooloffset-z</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">motion.tooloffset.z</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">Please note, that GMOCCAPY takes care of its own to update the offsets, sending an G43 after any tool change, <strong>but not in auto mode!</strong><br />
So writing a program makes you responsible to include an G43 after each tool change!</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gmoccapy:auto-tool-measurement">6. Auto Tool Measurement</h2>
<div class="sectionbody">
<div class="paragraph"><p>GMOCCAPY offers an integrated auto tool measurement.
To use this feature, you will need to do some additional settings and you may want to use the offered HAL pin to get values in your own NGC remap procedure.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">Before starting the first test, do not forget to enter the probe height and probe velocities on the settings page!
See <a href="gmoccapy.html#gmoccapy:tool-measurement">Settings Page Tool Measurement</a>.</td>
</tr></table>
</div>
<div class="paragraph"><p>It might be also a good idea to take a look at the tool measurement video:
see <a href="gmoccapy.html#gmoccapy:tool-measurement-videos">tool measurement related videos</a>.</p></div>
<div class="paragraph"><p>Tool Measurement in GMOCCAPY is done a little bit different to many other GUIs.
You should follow these steps:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Touch off your workpiece in X and Y.
</p>
</li>
<li>
<p>
Measure the height of your block from the base where your tool switch is
  located, to the upper face of the block (including chuck etc.).
</p>
</li>
<li>
<p>
Push the button block height and enter the measured value.
</p>
</li>
<li>
<p>
Go to auto mode and start your program.
</p>
</li>
</ol></div>
<div class="paragraph"><p>Here is a small sketch:</p></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/sketch_auto_tool_measurement.png" alt="images/sketch_auto_tool_measurement.png"/>
<figcaption class="title"> Figure 4. Tool measurement data</figcaption>
</figure>
</div>
</div>
<div class="paragraph"><p>With the first given tool change the tool will be measured and the offset will be set automatically to fit the block height.
The advantage of the GMOCCAPY way is, that you do not need a reference tool.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph"><p>Your program must contain a tool change at the beginning!
The tool will be measured, even it has been used before, so there is no danger, if the block height has changed.
There are several videos showing the way to do that on YouTube.</p></div>
</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_provided_pins">6.1. Provided Pins</h3>
<div class="paragraph"><p>GMOCCAPY offers five pins for tool measurement purposes.
These pins are mostly used to be read from a G-code subroutine, so the code can react to different values.</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>gmoccapy.toolmeasurement</strong> <em>(bit OUT)</em> - Enable or not tool measurement
</p>
</li>
<li>
<p>
<strong>gmoccapy.blockheight</strong> <em>(float OUT)</em> - The measured value of the top face of the workpiece
</p>
</li>
<li>
<p>
<strong>gmoccapy.probeheight</strong> <em>(float OUT)</em> - The probe switch height
</p>
</li>
<li>
<p>
<strong>gmoccapy.searchvel</strong> <em>(float OUT)</em> - The velocity to search for the tool probe switch
</p>
</li>
<li>
<p>
<strong>gmoccapy.probevel</strong> <em>(float OUT)</em> - The velocity to probe tool length
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_ini_file_modifications">6.2. INI File Modifications</h3>
<div class="paragraph"><p>Modify your INI file to include the following sections.</p></div>
<div class="listingblock">
<div class="title">The RS274NGC Section</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[RS274NGC]</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># is the sub, with is called when a error during tool change happens, not needed on every machine configuration</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">ON_ABORT_COMMAND</span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900">O &lt;on_abort&gt; call</span>

<span style="font-style: italic"><span style="color: #9A1900"># The remap code</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">REMAP</span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900">M6  modalgroup=6 prolog=change_prolog ngc=change epilog=change_epilog</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Make sure INI_VARS and HAL_PIN_VARS are not set to 0. They are set to 1 by default.</td>
</tr></table>
</div>
<div class="paragraph"><div class="title">The Tool Sensor Section</div><p>The position of the tool sensor and the start position of the probing movement,
all values are absolute coordinates, except MAXPROBE, which must be given in relative movement.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[TOOLSENSOR]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">X </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 10</span>
<span style="font-weight: bold"><span style="color: #0000FF">Y </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 10</span>
<span style="font-weight: bold"><span style="color: #0000FF">Z </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> -20</span>
<span style="font-weight: bold"><span style="color: #0000FF">MAXPROBE </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> -20</span></tt></pre></div></div>
<div class="paragraph"><div class="title">The Change Position Section</div><p>This is not named TOOL_CHANGE_POSITION  on purpose - <strong>canon uses that name and will interfere otherwise.</strong>
The position to move the machine before giving the change tool command. All values are in absolute coordinates.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[CHANGE_POSITION]</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">X </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 10</span>
<span style="font-weight: bold"><span style="color: #0000FF">Y </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> 10</span>
<span style="font-weight: bold"><span style="color: #0000FF">Z </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> -2</span></tt></pre></div></div>
<div class="paragraph"><div class="title">The Python Section</div><p>The Python plug ins serves interpreter and task.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">[PYTHON]</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># The path to start a search for user modules</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">PATH_PREPEND </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> python</span>
<span style="font-style: italic"><span style="color: #9A1900"># The start point for all.</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">TOPLEVEL </span></span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900"> python/toplevel.py</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_needed_files">6.3. Needed Files</h3>
<div class="paragraph"><p>First make a directory "python" in your config folder.
From <code>&lt;your_linuxcnc-dev_directory&gt;/configs/sim/gmoccapy/python</code> copy the following files into the just created <code>config_dir/python</code> folder:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>toplevel.py</code>
</p>
</li>
<li>
<p>
<code>remap.py</code>
</p>
</li>
<li>
<p>
<code>stdglue.py</code>
</p>
</li>
</ul></div>
<div class="paragraph"><p>From <code>&lt;your_linuxcnc-dev_directory&gt;/configs/sim/gmoccapy/macros</code> copy</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>on_abort.ngc</code>
</p>
</li>
<li>
<p>
<code>change.ngc</code>
</p>
</li>
</ul></div>
<div class="paragraph"><p>to the directory specified as <code>SUBROUTINE_PATH</code>, see <a href="#gmocappy:rs274ngc">RS274NGC Section</a>.</p></div>
<div class="paragraph"><p>Open <code>change.ngc</code> with a editor and uncomment the following lines (49 and 50):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">F </span></span><span style="color: #009900">#&lt;_hal[gmoccapy.probevel]&gt;</span>
<span style="font-weight: bold"><span style="color: #0000FF">G38.2</span></span> <span style="color: #FF6600">Z</span><span style="color: #993399">-4</span></tt></pre></div></div>
<div class="paragraph"><p>You may want to modify this file to fit more your needs.</p></div>
</div>
<div class="sect2">
<h3 id="_needed_hal_connections">6.4. Needed HAL Connections</h3>
<div class="paragraph"><p>Connect the tool probe in your HAL file like so:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">probe</span></span>  <span style="color: #009900">motion.probe-input</span> <span style="color: #990000">&lt;=</span> &lt;<span style="font-weight: bold"><span style="color: #000000">your_input_pin</span></span>&gt;</tt></pre></div></div>
<div class="paragraph"><p>The line might look like this:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">probe</span></span>  <span style="color: #009900">motion.probe-input</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">parport.0.pin-15-in</span></tt></pre></div></div>
<div class="paragraph"><p>In your postgui.hal file add the following lines:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># The next lines are only needed if the pins had been connected before</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">unlinkp</span></span> <span style="color: #009900">iocontrol.0.tool-change</span>
<span style="font-weight: bold"><span style="color: #0000FF">unlinkp</span></span> <span style="color: #009900">iocontrol.0.tool-changed</span>
<span style="font-weight: bold"><span style="color: #0000FF">unlinkp</span></span> <span style="color: #009900">iocontrol.0.tool-prep-number</span>
<span style="font-weight: bold"><span style="color: #0000FF">unlinkp</span></span> <span style="color: #009900">iocontrol.0.tool-prepared</span>

<span style="font-style: italic"><span style="color: #9A1900"># link to GMOCCAPY toolchange, so you get the advantage of tool description on change dialog</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tool-change</span></span> <span style="color: #009900">gmoccapy.toolchange-change</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">iocontrol.0.tool-change</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tool-changed</span></span> <span style="color: #009900">gmoccapy.toolchange-changed</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">iocontrol.0.tool-changed</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tool-prep-number</span></span> <span style="color: #009900">gmoccapy.toolchange-number</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">iocontrol.0.tool-prep-number</span>
<span style="font-weight: bold"><span style="color: #0000FF">net</span></span> <span style="font-weight: bold"><span style="color: #000000">tool-prep-loop</span></span> <span style="color: #009900">iocontrol.0.tool-prepare</span> <span style="color: #990000">&lt;=</span> <span style="color: #009900">iocontrol.0.tool-prepared</span></tt></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gmoccapy:settings-page">7. The Settings Page</h2>
<div class="sectionbody">
<div class="paragraph"><p>To enter the page you will have to click on <span class="image">
<img src="images/gmoccapy_settings_button.png" alt="images/gmoccapy_settings_button.png" />
</span> and give an unlock code, which is <strong>123</strong> by default.
If you want to change it at this time you will have to edit the hidden preference file, see <a href="gmoccapy.html#gmoccapy:display-section">the display section</a> for details.</p></div>
<div class="paragraph"><p>The page is separated in three main tabs:</p></div>
<div class="sect2">
<h3 id="_appearance">7.1. Appearance</h3>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_settings_appearance.png" alt="Configuration page"/>
<figcaption class="title"> Figure 5. GMOCCAPY settings page Appearance</figcaption>
</figure>
</div>
</div>
<div class="paragraph"><p>On this tab you will find the following options:</p></div>
<div class="paragraph"><div class="title">Main Window</div><p>Here you can select how you wish the GUI to start.
The main reason for this was the wish to get an easy way for the user to set the starting options without the need to touch code.
You have three options:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>Start as full screen</em>
</p>
</li>
<li>
<p>
<em>Start maximized</em>
</p>
</li>
<li>
<p>
<em>Start as window</em>  - If you select start as window the spinboxes to set the position and size will get active.
  One time set, the GUI will start every time on the place and with the size selected.
  Nevertheless the user can change the size and position using the mouse, but that will not have any influence on the settings.
</p>
</li>
<li>
<p>
<em>Window decorated</em> - Allows the title bar to be hidden. (default: title bar visible)
</p>
</li>
<li>
<p>
<em>hide cursor</em> - Does allow to hide the cursor, what is very useful if you use a touch screen.
</p>
</li>
<li>
<p>
<em>hide tooltips</em> - Does gide the tool tips.
</p>
</li>
</ul></div>
<div class="paragraph"><div class="title">Keyboard</div><p>The checkboxes allow the user to select if he wants the on board keyboard to be shown immediately,
when entering the MDI Mode, when entering the offset page, the tooledit widget or when open a program
in the EDIT mode. The keyboard button on the bottom button list will not be affected by these settings,
so you are able to show or hide the keyboard by pressing the button. The default behavior will be set by
the checkboxes.</p></div>
<div class="paragraph"><p>Default are :</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If this section is not sensitive, you have not installed a virtual keyboard, supported ones are <em>onboard</em> and <em>matchbox-keyboard</em>.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>Show keyboard on offset</em>
</p>
</li>
<li>
<p>
<em>Show keyboard on tooledit</em>
</p>
</li>
<li>
<p>
<em>Show keyboard on MDI</em>
</p>
</li>
<li>
<p>
<em>Show keyboard on EDIT</em>
</p>
</li>
<li>
<p>
<em>Show keyboard on load file</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>If the keyboard layout is not correct, i.e. clicking Y gives Z, than the layout has not been set properly, related to your locale settings.
For onboard it can be solved with a small batch file with the following content:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>#!/bin/bash
setxkbmap -model pc105 -layout de -variant basic</code></pre>
</div></div>
<div class="paragraph"><p>The letters "de" are for German, you will have to set them according to your locale settings.
Just execute this file before starting LinuxCNC, it can be done also adding a starter to your local folder.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>./config/autostart</code></pre>
</div></div>
<div class="paragraph"><p>So that the layout is set automatically on starting.</p></div>
<div class="paragraph"><p>For matchbox-keyboard you will have to make your own layout, for a German layout ask in the forum.</p></div>
<div class="paragraph"><div class="title">GMOCCAPY with Onboard keyboard in edit mode</div><p><span class="image">
<a class="image" href="images/gmoccapy_keyboard_edit_mode.png">
<img src="images/gmoccapy_keyboard_edit_mode_mid.png" alt="Onboard keyboard" />
</a>
</span></p></div>
<div class="paragraph"><div class="title">On Touch Off</div><p>This gives the option whether to show the preview tab or the offset page tab when you enter the touch off mode by clicking the corresponding bottom button.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>show preview</em>
</p>
</li>
<li>
<p>
<em>show offsets</em>
</p>
</li>
</ul></div>
<div class="paragraph"><div class="title">DRO Options</div><p>You have the option to select the background colors of the different DRO states.
So users suffering from protanopia (red/green weakness) are able to select proper colors.</p></div>
<div class="paragraph"><p>By default, the background colors are:</p></div>
<div class="ulist"><ul>
<li>
<p>
Relative mode  = black
</p>
</li>
<li>
<p>
Absolute mode  = blue
</p>
</li>
<li>
<p>
Distance to go = yellow
</p>
</li>
</ul></div>
<div class="paragraph"><p>The foreground color of the DRO can be selected with:</p></div>
<div class="ulist"><ul>
<li>
<p>
homed color   = green
</p>
</li>
<li>
<p>
unhomed color = red
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">You can change through the DRO modes (absolute, relative, distance to go) by clicking the number on the DRO!
If you click on the left side letter of the DRO a popup window will allow you to set the value of the axes,
making it easier to set the value, as you will not need to go over the touch off bottom button.</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
size
</dt>
<dd>
<p>
  Allows to set the size of the DRO font, default is 28, if you use a bigger screen you may want to increase the size up to 56.
  If you do use 4 axes, the DRO font size will be 3/4 of the value, because of space reason.
</p>
</dd>
<dt class="hdlist1">
digits
</dt>
<dd>
<p>
  Sets the number of digits of the DRO from 1 to 5.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph"><p>Imperial will show one digit more that metric.
So if you are in imperial machine units and set the digit value to 1, you will get no digit at all in metric.</p></div>
</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
toggle DRO mode
</dt>
<dd>
<p>
  If not active, a mouse click on the DRO will not take any action.<br />
  By default this checkbox is active, so every click on any DRO will toggle the DRO readout from actual to relative to DTG (distance to go).<br />
  Neverthereless a click on the axis letter will open the popup dialog to set the axis value.
</p>
</dd>
</dl></div>
<div class="ulist"><div class="title">Preview</div><ul>
<li>
<p>
<em>Grid Size</em> -
  Sets the grid size of the preview window.
  Unfortunately the size <strong>has to be set in inches</strong>, even if your machine units are metric.
  We do hope to fix that in a future release.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The grid will not be shown in perspective view.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>Show DRO</em> - Will show the a DRO also in the preview pane, it will be always shown in fullsize preview.
</p>
</li>
<li>
<p>
<em>Show DTG</em> -  Will show the DTG (direct distance to end point) in the preview pane if Show DRO is active. Otherwise only in full size preview.
</p>
</li>
<li>
<p>
<em>Show Offsets</em> -  Will show the offsets in the preview pane when Show DRO is active. Otherwise only in full size preview.
</p>
</li>
<li>
<p>
<em>Mouse Button Mode</em> -  This combobox allows you to select the button behavior of the mouse to rotate, move or zoom within the preview:
</p>
<div class="ulist"><ul>
<li>
<p>
left rotate, middle move, right zoom
</p>
</li>
<li>
<p>
left zoom, middle move, right rotate
</p>
</li>
<li>
<p>
left move, middle rotate, right zoom
</p>
</li>
<li>
<p>
left zoom, middle rotate, right move
</p>
</li>
<li>
<p>
left move, middle zoom, right rotate
</p>
</li>
<li>
<p>
left rotate, middle zoom, right move
</p>
<div class="paragraph"><p>Default is left move, middle zoom, right rotate.</p></div>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p>The mouse wheel will still zoom the preview in every mode.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph"><p>If you select an element in the preview,
the selected element will be taken as rotation center point and in auto mode the corresponding code line will be highlighted.</p></div>
</td>
</tr></table>
</div>
<div class="paragraph"><div class="title">File to load on start up</div><p>Select the file you want to be loaded on start up.
If a file is loaded, it can be set by pressing the current button.
To avoid that any program is loaded at start up, just press the None button.</p></div>
<div class="paragraph"><p>The file selection screen will use the filters you have set in the INI file,
if there aren&#8217;t any filters given, you will only see <strong>NGC files</strong>.
The path will be set according to the INI settings in <code>[DISPLAY] PROGRAM_PREFIX</code>.</p></div>
<div class="paragraph"><div class="title">Jump to dir</div><p>You can set here the directory to jump to if you press the corresponding button in the file selection dialog.</p></div>
<div class="paragraph"><div class="title">Themes and Sounds</div><p>This lets the user select what desktop theme to apply and what error and messages sounds should be played.
By default "Follow System Theme" is set.</p></div>
<div class="paragraph"><p>It further allows to change the icon theme.
Currently there are three themes available:</p></div>
<div class="ulist"><ul>
<li>
<p>
classic
</p>
</li>
<li>
<p>
material
</p>
</li>
<li>
<p>
material light
</p>
</li>
</ul></div>
<div class="paragraph"><p>To create custom icon themes, see section <a href="gmoccapy.html#gmoccapy:icon-theme-section">Icon Theme</a> for details.</p></div>
</div>
<div class="sect2">
<h3 id="_hardware">7.2. Hardware</h3>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_settings_hardware.png" alt="Hardware settings"/>
</figure>
</div>
</div>
<div class="paragraph"><div class="title">Hardware MPG Scale</div><p>For the different HAL pins to connect MPG wheels to, you may select individual scales to be applied.
The main reason for this was my own test to solve this through HAL connections, resulting in a very complex HAL file.
Imagine a user having an MPG Wheel with 100 ipr and he wants to slow down the max. vel. from 14000 to 2000 mm/min,
that needs 12000 impulses, resulting in 120 turns of the wheel!
Or an other user having a MPG Wheel with 500 ipr and he wants to set the spindle override
which has limits from 50 to 120 % so he goes from min to max within 70 impulses, meaning not even 1/4 turn.</p></div>
<div class="paragraph"><p>By default all scales are set using the calculation:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>(MAX - MIN)/100</code></pre>
</div></div>
<div class="paragraph"><div class="title">Keyboard shortcuts</div><p>Some users want to jog there machine using the keyboard buttons and there are others that will never allow this.
So everybody can select whether to use them or not.<br />
Keyboard shortcuts are disabled by default.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">It is not recommended to use keyboard jogging, as it represents a serious risk for operator and machine.</td>
</tr></table>
</div>
<div class="paragraph"><p>Please take care if you use a lathe, then the shortcuts will be different,
see the <a href="gmoccapy.html#gmoccapy:lathe-section">Lathe Specific Section</a>.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
General
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>F1</em> - Trigger Estop (will work even if keyboard shortcuts are disabled)
</p>
</li>
<li>
<p>
<em>F2</em> - Toggle machine on/off
</p>
</li>
<li>
<p>
<em>F3</em> - Manual mode
</p>
</li>
<li>
<p>
<em>F5</em> - MDI mode
</p>
</li>
<li>
<p>
<em>ESC</em> - Abort
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
In Manual Mode
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>Arrow_Left</em> or <em>NumPad_Left</em> - Jog X minus
</p>
</li>
<li>
<p>
<em>Arrow_Right</em> or <em>NumPad_Right</em> - Jog X plus
</p>
</li>
<li>
<p>
<em>Arrow_up</em> or <em>NumPad_Up</em> - Jog Y plus
</p>
</li>
<li>
<p>
<em>Arrow_Down</em> or <em>NumPad_Down</em> - Jog Y minus
</p>
</li>
<li>
<p>
<em>Page_Up</em> or <em>NumPad_Page_Up</em> - Jog Z plus
</p>
</li>
<li>
<p>
<em>Page_Down</em> or <em>NumPad_Page_Down</em> - Jog Z minus
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
In Auto Mode
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>R</em> or <em>r</em> - Run program
</p>
</li>
<li>
<p>
<em>P</em> or <em>p</em> - Pause program
</p>
</li>
<li>
<p>
<em>S</em> or <em>s</em> - Resume program
</p>
</li>
<li>
<p>
<em>Control + R</em> or <em>Control + r</em> - Reload the loaded file
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
Message handling (see <a href="#gmoccapy:message-behavior">Message behavior and appearance</a>)
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>WINDOWS</em> - Delete last message
</p>
</li>
<li>
<p>
<em>Control + Space</em> - Delete all messages
</p>
</li>
</ul></div>
</dd>
</dl></div>
<div class="paragraph"><div class="title">Unlock options</div><p>There are three options to unlock the settings page:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>Use unlock code</em> -  The user must give a code to get in.
</p>
</li>
<li>
<p>
<em>Do not use unlock code</em> - There will be no security check.
</p>
</li>
<li>
<p>
<em>Use HAL pin to unlock</em> - Hardware pin must be high to unlock the settings, see <a href="gmoccapy.html#gmoccapy:hardware-unlock">hardware unlock pin</a>.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Default is <em>use unlock code</em> (default = <strong>123</strong>).</p></div>
<div class="ulist"><div class="title">Spindle</div><ul>
<li>
<p>
<em>Starting RPM</em> - Sets the rpm to be used if the spindle is started and no S value has been set.
</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This value will be presetted according to your settings in <code>[DISPLAY] DEFAULT_SPINDLE_SPEED</code> of your INI file.
If you change the settings on the settings page, that value will be default from that moment, your INI file will not be modified.</td>
</tr></table>
</div>
</li>
<li>
<p>
<em>Spindle bar min</em> and <em>Spindle bar max</em> - Sets the limits of the spindle bar shown in the INFO frame on the main screen.
</p>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p>Default values are:<br />
MIN = 0<br />
MAX = 6000</p></div>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">It is no error giving wrong values.
If you give a maximum of 2000 and your spindle makes 4000 rpm, only the bar level will be wrong on higher speeds than 2000 rpm.</td>
</tr></table>
</div>
</li>
</ul></div>
<div class="paragraph" id="gmoccapy:turtle-jog"><div class="title">Turtle Jog</div><p>This settings will have influence on the jog velocities.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>Hide turtle jog button</em> - Will hide the button right of the jog velocity slider.
  If you hide this button, please take care that the "rabbit mode" is activated,
  otherwise you will not be able to jog faster than the turtle jog velocity,
  which is calculated using the turtle jog factor.
</p>
</li>
<li>
<p>
<em>Turtle jog factor</em> - Sets the scale to apply for turtle jog mode (button pressed, showing the turtle).
  If you set a factor of 20, the turtle max. jog velocity will be 1/20 of the max. velocity of the machine.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This button can be controlled using the <a href="gmoccapy.html#gmoccapy:jog-velocity">Turtle-Jog HAL Pin</a>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="gmoccapy:tool-measurement">7.3. Advanced Settings</h3>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_settings_advanced.png" alt="Advanced settings"/>
</figure>
</div>
</div>
<div class="paragraph"><div class="title">Tool Measurement</div><p>Please check <a href="gmoccapy.html#gmoccapy:auto-tool-measurement">Auto Tool Measurement</a></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If this part is not sensitive, you do not have a valid INI file configuration to use tool measurement.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>Use auto tool measurement</em> - If checked, after each tool change, a tool measurement will be done,
  the result will be stored in the tool table and a G43 will be executed after the change.
</p>
<div class="dlist"><dl>
<dt class="hdlist1">
Probe Information
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>The following information is taken from your INI file and must be given in absolute coordinates.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>X Pos.</em> - The X position of the tool switch.
</p>
</li>
<li>
<p>
<em>Y Pos.</em> - The Y position of the tool switch.
</p>
</li>
<li>
<p>
<em>Z Pos.</em> - The Z position of the tool switch, we will go as rapid move to this coordinate.
</p>
</li>
<li>
<p>
<em>Max. Probe</em>  The distance to search for contact, an error will be launched, if no contact is given in this range.
  The distance has to be given in relative coordinates, beginning the move from Z Pos., so you have to give a negative value to go down!
</p>
</li>
<li>
<p>
<em>Probe Height</em> - The height of your probe switch, you can measure it.
  Just touch off the base where the probe switch is located and set that to zero.
  Then make a tool change and watch the tool_offset_z value, that is the height you must enter here.
</p>
</li>
</ul></div>
</div></div>
</dd>
<dt class="hdlist1">
Probe velocities
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="ulist"><ul>
<li>
<p>
<em>Search Vel.</em> - The velocity to search for the tool switch.
  After contact the tool will go up again and then goes towards the probe again with probe vel, so you will get better results.
</p>
</li>
<li>
<p>
<em>Probe Vel.</em> - The velocity for the second movement to the switch.
  It should be slower to get better touch results.
  In simulation mode, this is commented out in macros/change.ngc, otherwise the user would have to click twice on the probe button.
</p>
</li>
</ul></div>
</div></div>
</dd>
</dl></div>
</li>
</ul></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Reload Tool
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>Reload Tool on Start</em> - Loads the last tool on start after homing.
</p>
</li>
</ul></div>
</dd>
</dl></div>
<div class="paragraph"><div class="title">Run From Line Option</div><p>You can allow or disallow the run from line.
This will set the corresponding button insensitive (grayed out), so the user will not be able to use this option.
The default is disable run from line.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">It is not recommend to use run from line, as LinuxCNC will not take care of any previous lines in the code before the starting line.
So errors or crashes are fairly likely.</td>
</tr></table>
</div>
<div class="paragraph" id="gmoccapy:message-behavior"><div class="title">Message Behavior And Appearance</div><p>This will display small pop up windows displaying a message or error text, similar to the ones known from AXIS.
You can delete a specific message by clicking on its close button.
If you want to delete the last one, just hit the <code>WINDOWS</code> key on your keyboard, or delete all messages at once with <code>Control + Space</code>.</p></div>
<div class="paragraph"><p>You are able to set some options:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>X Pos</em> - The position of the top left corner of the message in X counted in pixel from the top left corner of the screen.
</p>
</li>
<li>
<p>
<em>Y Pos</em> - The position of the top left corner of the message in Y counted in pixel from the top left corner of the screen.
</p>
</li>
<li>
<p>
<em>Width</em> - The width of the message box.
</p>
</li>
<li>
<p>
<em>Max Messages</em> - The maximum number of messages you want to see at once.
  If you set this to 10, the 11<sup>th</sup> message will delete the first one, so you will only see the last 10.
</p>
</li>
<li>
<p>
<em>Font</em> - The font and size you want to use to display the messages.
</p>
</li>
<li>
<p>
<em>Use frames</em> - If you activate the checkbox, each message will be displayed in a frame,
  so it is much easier to distinguish the messages. But you will need a little bit more space.
</p>
</li>
<li>
<p>
<em>Launch test message</em>-button - It will show a message, so you can see the changes of your settings without the need to generate an error.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gmoccapy:icon-theme-section">8. Icon Theme</h2>
<div class="sectionbody">
<div class="paragraph"><p>Icon themes are used to customize the look and feel of GMOCCAPY&#8217;s icons.</p></div>
<div class="paragraph"><p>GMOCCAPY ships with three different icon themes:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>classic</em> - The classic GMOCCAPY icons.
</p>
</li>
<li>
<p>
<em>material</em> - A modern icon theme inspired by Google&#8217;s Material Icons that automatically adopts its coloring from the selected desktop theme.
</p>
</li>
<li>
<p>
<em>material-light</em> -  Derived from material but optimized for light desktop themes.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The icon theme used in GMOCCAPY is a regular GTK icon theme that follows the freedestktop icon theme specification.
Thus every valid GTK icon theme can be used as GMOCCAPY icon theme as long as it contains the required icons.</p></div>
<div class="paragraph"><p>GMOCCAPY scans the following directories for icon themes:</p></div>
<div class="ulist"><ul>
<li>
<p>
linuxcnc/share/gmoccapy/icons
</p>
</li>
<li>
<p>
~/.icons
</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="_custom_icon_theme">8.1. Custom Icon Theme</h3>
<div class="paragraph"><p>Creating a custom icon theme is pretty easy.
All you need is a text editor and of course the desired icons as pixel or vector graphics.
Details about how exactly an icon theme is built can be found at the <a href="https://specifications.freedesktop.org/icon-theme-spec/icon-theme-spec-latest.html">Freedesktop Icon Theme Specification</a>.</p></div>
<div class="paragraph"><p>Start by creating an empty directory with the name of the icon theme.
Place the directory in one of GMOCCAPY&#8217;s icon theme directories.
Then we need a file called index.theme in the root folder of our icon theme which contains the required metadata for the theme.
That&#8217;s a simple text file with at least the following sections:</p></div>
<div class="ulist"><ul>
<li>
<p>
[Icon Theme]
</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre><code>[Icon Theme]
Name=YOUR_THEME_NAME
Comment=A DESCRIPTION OF YOUR THEME
Inherits=hicolor
Directories=16x16/actions,24x24/actions,32x32/actions,48x48/actions,scalable/actions</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
Name: The name of your icon theme.
</p>
</li>
<li>
<p>
Comment: A description of your icon theme.
</p>
</li>
<li>
<p>
Inherits: A icon theme can derive from another icon theme, the default is hicolor.
</p>
</li>
<li>
<p>
Directories: A comma separated list of all the directories of your icon theme.<br />
  Each directory usually contains all the icons of the theme in a specific size, for example 16x16/actions should contain all icons with the category "actions" in the size 16x16 pixels as pixel-graphics (e.g. png files).
  A special case is the directory called "scalable/actions", this contains scalable icons not tied to a specific size (e.g. svg files).<br />
  By supplying different sized versions of the icons,
  we can guarantee a nice looking icon if different sizes and we also have the ability to change the icon according to its size,
  for example a 64x64 px sized icon may contain more details than its 16x16 px version.
</p>
</li>
</ul></div>
</div></div>
</li>
<li>
<p>
For each directory we also have to write a section in the index.theme file:
</p>
<div class="listingblock">
<div class="content">
<pre><code>[16x16/actions]
Size=16
Type=Fixed
Context=Actions

[scalable/actions]
Size=48
Type=Scalable
Context=Actions</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
Size: Nominal icon size in this directory
</p>
</li>
<li>
<p>
Type: Fixed, Threshold or Scalable
</p>
</li>
<li>
<p>
Context: Intended "category" of icons
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p>Basically that&#8217;s everything needed to create a custom icon theme.</p></div>
</div>
<div class="sect2">
<h3 id="_symbolic_icons">8.2. Symbolic Icons</h3>
<div class="paragraph"><p>Symbolic icons are a special type of icon, usually a monochrome image.
The special feature of symbolic icons is that the icons are automatically colored at runtime to match the desktop theme.
That way, icon themes can be created that work well with dark and also light desktop themes
(in fact, that&#8217;s not always the best option, that&#8217;s why a dedicated "material-light" theme exists).</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<figure>
<img src="images/gmoccapy_icon_theme_symbolic.png" alt="images/gmoccapy_icon_theme_symbolic.png"/>
</figure>
</div>
</div>
<div class="paragraph"><p>To make use of the symbolic feature,
a icon file has to have the suffix .symbolic.$ext (where $ext is the regular file extension like png) for example "power_on.symbolic.png".</p></div>
<div class="paragraph"><p>With that name, GTK treats this image as symbolic icon and applies some recoloring when loading the icon.
There are only four colors allowed to use:</p></div>
<div class="tableblock">
<table rules="none" class="tableblock"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="16%" />
<col width="66%" />
<thead>
<tr>
<th align="left" valign="top">Color   </th>
<th align="left" valign="top">Hex Code   </th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">black</p></td>
<td align="left" valign="top"><p class="table"><code>#000000</code></p></td>
<td align="left" valign="top"><p class="table">Primary color, gets changed to match the desktop themes primary color.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">red</p></td>
<td align="left" valign="top"><p class="table"><code>#ff0000</code></p></td>
<td align="left" valign="top"><p class="table">Success: this color indicates "success" (usually something green&#8217;ish).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">green</p></td>
<td align="left" valign="top"><p class="table"><code>#00ff00</code></p></td>
<td align="left" valign="top"><p class="table">Warning: this color indicates "warning"  (usually something yellow/orange&#8217;ish).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">blue</p></td>
<td align="left" valign="top"><p class="table"><code>#0000ff</code></p></td>
<td align="left" valign="top"><p class="table">Error: this color indicates "error" (usually something red&#8217;ish).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">Examples of symbolic icons can be found at <code>linuxcnc/share/gmoccapy/icons/material</code>.</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gmoccapy:lathe-section">9. Lathe Specific Section</h2>
<div class="sectionbody">
<div class="paragraph"><p>If in the INI file <code>LATHE = 1</code> is given, the GUI will change its appearance to the special needs for a lathe.
Mainly the Y axis will be hidden and the jog buttons will be arranged in a different order.</p></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_lathe.png" alt="images/gmoccapy_lathe.png"/>
<figcaption class="title"> Figure 6. Normal Lathe</figcaption>
</figure>
</div>
</div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_back_tool_lathe.png" alt="images/gmoccapy_back_tool_lathe.png"/>
<figcaption class="title"> Figure 7. Back Tool Lathe</figcaption>
</figure>
</div>
</div>
<div class="paragraph"><p>As you see the R DRO has a black background and the D DRO is gray.
This will change according to the active G-code G7 or G8.
The active mode is visible by the black background, meaning in the shown images G8 is active.</p></div>
<div class="paragraph"><p>The next difference to the standard screen is the location of the jog buttons.
X and Z have changed places and Y is gone.
You will note that the X+ and X- buttons changes there places according to normal or back tool lathe.</p></div>
<div class="paragraph"><p>Also the keyboard behavior will change:</p></div>
<div class="paragraph"><p>Normal Lathe:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>Arrow_Left</em> or <em>NumPad_Left</em> - Jog Z minus
</p>
</li>
<li>
<p>
<em>Arrow_Right</em> or <em>NumPad_Right</em> - Jog Z plus
</p>
</li>
<li>
<p>
<em>Arrow_up</em> or <em>NumPad_Up</em> - Jog X minus
</p>
</li>
<li>
<p>
<em>Arrow_Down</em> or <em>NumPad_Down</em> - Jog X plus
</p>
</li>
</ul></div>
<div class="paragraph"><p>Back Tool Lathe:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>Arrow_Left</em> or <em>NumPad_Left</em> - Jog Z minus
</p>
</li>
<li>
<p>
<em>Arrow_Right</em> or <em>NumPad_Right</em> - Jog Z plus
</p>
</li>
<li>
<p>
<em>Arrow_up</em> or <em>NumPad_Up</em> - Jog X plus
</p>
</li>
<li>
<p>
<em>Arrow_Down</em> or <em>NumPad_Down</em> - Jog X minus
</p>
</li>
</ul></div>
<div class="paragraph"><p>The tool information frame will show not only the Z offset, but also the X offset and the tool table is showing all lathe relevant information.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_plasma_specific_section">10. Plasma Specific Section</h2>
<div class="sectionbody">
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/gmoccapy_plasma.png" alt="Plasma GUI"/>
</figure>
</div>
</div>
<div class="paragraph"><p>There is a very good WIKI, which is actually growing, maintained by Marius,
see <a href="https://wiki.linuxcnc.org/cgi-bin/wiki.pl?Gmoccapy_plasma">Plasma wiki page</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_videos_on_youtube">11. Videos on YouTube</h2>
<div class="sectionbody">
<div class="paragraph"><p>Below is a series of videos that show GMOCCAPY in action.
Unfortunately, these videos don&#8217;t show the latest version of GMOCCAPY,
but the way to use it will still be the same as in the current version.
I will update the videos as soon as possible.</p></div>
<div class="sect2">
<h3 id="_basic_usage">11.1. Basic Usage</h3>
<div class="paragraph"><p><a href="https://youtu.be/O5B-s3uiI6g">https://youtu.be/O5B-s3uiI6g</a></p></div>
</div>
<div class="sect2">
<h3 id="_simulated_jog_wheels">11.2. Simulated Jog Wheels</h3>
<div class="paragraph"><p><a href="https://youtu.be/ag34SGxt97o">https://youtu.be/ag34SGxt97o</a></p></div>
</div>
<div class="sect2">
<h3 id="_settings_page">11.3. Settings Page</h3>
<div class="paragraph"><p><a href="https://youtu.be/AuwhSHRJoiI">https://youtu.be/AuwhSHRJoiI</a></p></div>
</div>
<div class="sect2">
<h3 id="_simulated_hardware_button">11.4. Simulated Hardware Button</h3>
<div class="paragraph"><p>German: <a href="https://youtu.be/DTqhY-MfzDE">https://youtu.be/DTqhY-MfzDE</a></p></div>
<div class="paragraph"><p>English: <a href="https://youtu.be/ItVWJBK9WFA">https://youtu.be/ItVWJBK9WFA</a></p></div>
</div>
<div class="sect2">
<h3 id="_user_tabs">11.5. User Tabs</h3>
<div class="paragraph"><p><a href="https://youtu.be/rG1zmeqXyZI">https://youtu.be/rG1zmeqXyZI</a></p></div>
</div>
<div class="sect2">
<h3 id="gmoccapy:tool-measurement-videos">11.6. Tool Measurement Videos</h3>
<div class="paragraph"><p>Auto Tool Measurement Simulation: <a href="https://youtu.be/rrkMw6rUFdk">https://youtu.be/rrkMw6rUFdk</a></p></div>
<div class="paragraph"><p>Auto Tool Measurement Screen: <a href="https://youtu.be/Z2ULDj9dzvk">https://youtu.be/Z2ULDj9dzvk</a></p></div>
<div class="paragraph"><p>Auto Tool Measurement Machine: <a href="https://youtu.be/1arucCaDdX4">https://youtu.be/1arucCaDdX4</a></p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_known_problems">12. Known problems</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_strange_numbers_in_the_info_area">12.1. Strange numbers in the info area</h3>
<div class="paragraph"><p>If you get strange numbers in the info area of GMOCCAPY like:</p></div>
<div class="imageblock" style="text-align:left;">
<div class="content">
<figure>
<img src="images/strange_numbers.png" alt="Strange numbers"/>
</figure>
</div>
</div>
<div class="paragraph"><p>You have made your config file using an older version of StepConfWizard.
It has made a wrong entry in the INI file under the [TRAJ] named MAX_LINEAR_VELOCITY = xxx.
Change that entry to MAX_VELOCITY = xxx.</p></div>
</div>
<div class="sect2">
<h3 id="sub:NOT_ENDING_MACROS">12.2. Not ending macro</h3>
<div class="paragraph"><p>If you use a macro without movement, like this one:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080"> o&lt;zeroxy&gt; sub</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">G92</span></span><span style="color: #993399">.1</span>
<span style="font-weight: bold"><span style="color: #0000FF">G92</span></span><span style="color: #993399">.2</span>
<span style="font-weight: bold"><span style="color: #0000FF">G40</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">G10</span></span> <span style="color: #FF6600">L</span><span style="color: #993399">20</span> <span style="color: #FF6600">P</span><span style="color: #993399">0</span> <span style="color: #FF6600">X</span><span style="color: #993399">0</span> <span style="color: #FF6600">Y</span><span style="color: #993399">0</span>

<span style="font-weight: bold"><span style="color: #000080">o&lt;zeroxy&gt; endsub</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">m2</span></span></tt></pre></div></div>
<div class="paragraph"><p>GMOCCAPY will not see the end of the macro, because the interpreter needs to change its state to IDLE,
but the macro does not even set the interpreter to a new state.
To avoid that just add a G4 P0.1 line to get the needed signal.
The correct macro would be:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080"> o&lt;zeroxy&gt; sub</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">G92</span></span><span style="color: #993399">.1</span>
<span style="font-weight: bold"><span style="color: #0000FF">G92</span></span><span style="color: #993399">.2</span>
<span style="font-weight: bold"><span style="color: #0000FF">G40</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">G10</span></span> <span style="color: #FF6600">L</span><span style="color: #993399">20</span> <span style="color: #FF6600">P</span><span style="color: #993399">0</span> <span style="color: #FF6600">X</span><span style="color: #993399">0</span> <span style="color: #FF6600">Y</span><span style="color: #993399">0</span>

<span style="font-weight: bold"><span style="color: #0000FF">G4</span></span> <span style="color: #FF6600">P</span><span style="color: #993399">0.1</span>

<span style="font-weight: bold"><span style="color: #000080">o&lt;zeroxy&gt; endsub</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">m2</span></span></tt></pre></div></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2023-06-18 10:43:37 CEST
</div>
</div>
</body>
</html>
